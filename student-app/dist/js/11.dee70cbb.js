(self["webpackChunkqimingyu_student_app"]=self["webpackChunkqimingyu_student_app"]||[]).push([[11],{81:function(e,t,n){"use strict";var s=n(9565),i=n(9306),o=n(8551),r=n(6823),a=n(851),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(i(n))return o(s(n,e));throw new c(r(e)+" is not iterable")}},397:function(e,t,n){"use strict";var s=n(7751);e.exports=s("document","documentElement")},679:function(e,t,n){"use strict";var s=n(1625),i=TypeError;e.exports=function(e,t){if(s(t,e))return e;throw new i("Incorrect invocation")}},851:function(e,t,n){"use strict";var s=n(6955),i=n(5966),o=n(4117),r=n(6269),a=n(8227),c=a("iterator");e.exports=function(e){if(!o(e))return i(e,c)||i(e,"@@iterator")||r[s(e)]}},1011:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"online-consultation"},[e.offlineTestMode?t("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{title:"离线测试模式已启用，所有功能使用模拟数据",type:"info",description:"此模式下可以测试UI流程，但不会发送实际请求到后端服务。","show-icon":"",closable:!1}}):e._e(),e.activeConsultation?e._e():t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("选择咨询教师")])]),t("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{placeholder:"搜索教师姓名...",clearable:""},on:{clear:e.fetchTeachers},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchTeachers.apply(null,arguments)}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.fetchTeachers},slot:"append"})],1)],1),t("el-col",{attrs:{span:8}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"筛选学科",clearable:""},on:{change:e.fetchTeachers},model:{value:e.filterSubject,callback:function(t){e.filterSubject=t},expression:"filterSubject"}},[t("el-option",{attrs:{label:"数学",value:"math"}}),t("el-option",{attrs:{label:"物理",value:"physics"}}),t("el-option",{attrs:{label:"化学",value:"chemistry"}}),t("el-option",{attrs:{label:"英语",value:"english"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"筛选在线状态",clearable:""},on:{change:e.fetchTeachers},model:{value:e.filterAvailability,callback:function(t){e.filterAvailability=t},expression:"filterAvailability"}},[t("el-option",{attrs:{label:"在线",value:!0}}),t("el-option",{attrs:{label:"离线",value:!1}})],1)],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.loading||0!==e.teachers.length?t("el-row",{attrs:{gutter:20}},e._l(e.teachers,(function(n){return t("el-col",{key:n._id,staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[t("el-card",{staticClass:"teacher-card",attrs:{shadow:"hover"}},[t("div",{staticClass:"teacher-info"},[t("el-avatar",{staticStyle:{"margin-bottom":"10px"},attrs:{size:60,src:n.avatar||e.defaultAvatar}}),t("h4",[e._v(e._s(n.name))]),t("p",{staticClass:"teacher-subject"},[t("i",{staticClass:"el-icon-collection-tag"}),e._v(" "+e._s(n.subjects?.join(", ")||"暂未指定学科")+" ")]),t("p",{staticClass:"teacher-status"},[t("el-tag",{attrs:{type:n.isOnline?"success":"info",size:"mini"}},[e._v(e._s(n.isOnline?"在线":"离线"))])],1),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.viewTeacherProfile(n._id)}}},[e._v("查看详情")]),t("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-chat-dot-round",disabled:!n.isOnline},on:{click:function(t){return e.showConsultationDialog(n)}}},[e._v(" 发起咨询 ")])],1)])],1)})),1):t("div",{staticClass:"no-teachers-placeholder"},[t("el-empty",{attrs:{description:"暂无教师或未找到匹配教师"}})],1),e.teachers.length>0?t("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{background:"",layout:"prev, pager, next, total",total:e.totalTeachers,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handlePageChange}}):e._e()],1)],1),t("el-dialog",{attrs:{title:"发起在线咨询",visible:e.consultationDialogVisible,width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!e.sendingRequest},on:{"update:visible":function(t){e.consultationDialogVisible=t}}},[t("el-form",{ref:"consultationForm",attrs:{model:e.consultationForm,rules:e.consultationRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"咨询主题",prop:"topic"}},[t("el-input",{attrs:{placeholder:"请简要描述您需要咨询的问题"},model:{value:e.consultationForm.topic,callback:function(t){e.$set(e.consultationForm,"topic",t)},expression:"consultationForm.topic"}})],1),t("el-form-item",{attrs:{label:"咨询内容",prop:"message"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请详细描述您的问题，以便教师更好地帮助您",rows:4},model:{value:e.consultationForm.message,callback:function(t){e.$set(e.consultationForm,"message",t)},expression:"consultationForm.message"}})],1)],1),e.requestStatus?t("div",{class:["request-status",{success:e.requestStatus.success}]},[e._v(" "+e._s(e.requestStatus.message)+" ")]):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{disabled:e.sendingRequest},on:{click:e.cancelConsultation}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.sendingRequest},on:{click:e.submitConsultation}},[e._v("发送请求")])],1)],1),e.waitingForTeacher?t("el-card",{staticClass:"waiting-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("等待教师接受")])]),t("div",{staticClass:"waiting-content"},[t("el-avatar",{attrs:{size:80,src:e.selectedTeacher?.avatar||e.defaultAvatar}}),t("h3",[e._v(e._s(e.consultationForm.topic))]),t("p",[e._v("您的咨询请求已发送给 "+e._s(e.selectedTeacher?.name)+"，请耐心等待教师接受。")]),t("div",{staticClass:"waiting-timer"},[t("el-progress",{attrs:{type:"circle",percentage:e.waitingProgress,width:80}}),t("p",[e._v(e._s(Math.floor(e.waitingTimeLeft/60))+":"+e._s((e.waitingTimeLeft%60).toString().padStart(2,"0")))])],1),t("el-button",{attrs:{type:"danger"},on:{click:e.cancelWaitingRequest}},[e._v("取消请求")]),t("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:e.simulateTeacherAccept}},[e._v(" 模拟教师接受（测试用） ")])],1)]):e._e(),e.activeConsultation?t("el-card",{staticClass:"consultation-card"},[t("div",{staticClass:"consultation-header",attrs:{slot:"header"},slot:"header"},[t("div",[t("span",[e._v("与 "+e._s(e.activeConsultation.teacherName)+" 的在线咨询")]),t("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",size:"small"}},[e._v("进行中")])],1),t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-close"},on:{click:e.endConsultation}},[e._v("结束咨询")])],1),t("div",{staticClass:"consultation-content"},[t("div",{ref:"messagesContainer",staticClass:"messages-container"},[e._l(e.consultationMessages,(function(n,s){return t("div",{key:s,class:["message","student"===n.senderRole?"message-sent":"message-received"]},[t("div",{staticClass:"message-header"},[t("span",{staticClass:"message-sender"},[e._v(e._s(n.senderName))]),t("span",{staticClass:"message-time"},[e._v(e._s(e.formatTime(n.timestamp)))])]),t("div",{staticClass:"message-body"},[e._v(e._s(n.message))])])})),0===e.consultationMessages.length?t("div",{staticClass:"no-messages"},[t("p",[e._v("咨询已开始，请输入您的问题...")])]):e._e()],2),t("div",{staticClass:"message-input"},[t("el-input",{attrs:{type:"textarea",placeholder:"输入消息...",rows:3,disabled:e.messageInputDisabled},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.sendMessage.apply(null,arguments):null}},model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}}),t("el-button",{staticStyle:{"margin-top":"10px",width:"100%"},attrs:{type:"primary",icon:"el-icon-s-promotion",disabled:!e.newMessage.trim()||e.messageInputDisabled},on:{click:e.sendMessage}},[e._v(" 发送消息 ")])],1)])]):e._e(),t("el-dialog",{attrs:{title:"咨询已结束",visible:e.endDialogVisible,width:"500px","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.endDialogVisible=t}}},[t("div",{staticClass:"end-consultation-content"},[e.endedWithError?t("i",{staticClass:"el-icon-circle-close end-icon error"}):t("i",{staticClass:"el-icon-circle-check end-icon success"}),t("h3",[e._v(e._s(e.endReason))]),t("p",[e._v("您可以为本次咨询评分：")]),t("el-rate",{attrs:{colors:e.ratingColors},model:{value:e.consultationRating,callback:function(t){e.consultationRating=t},expression:"consultationRating"}}),t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请留下您对本次咨询的评价（可选）"},model:{value:e.consultationFeedback,callback:function(t){e.consultationFeedback=t},expression:"consultationFeedback"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitFeedbackAndReturn}},[e._v("确定")])],1)])],1)},i=[],o=(n(4114),n(8111),n(7588),n(1314)),r=n.n(o);class a{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map((e=>`v${e.replace(".","")}.stomp`))}}function c(e,t){e.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const s=new Date,i=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=e=>{const n=(new Date).getTime()-s.getTime();t(`Discarded socket (#${i})  closed after ${n}ms, with code/reason: ${e.code}/${e.reason}`)},this.close(),o?.call(e,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}}a.V1_0="1.0",a.V1_1="1.1",a.V1_2="1.2",a.default=new a([a.V1_2,a.V1_1,a.V1_0]);const l={LF:"\n",NULL:"\0"};class u{get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body||""}get binaryBody(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}constructor(e){const{command:t,headers:n,body:s,binaryBody:i,escapeHeaderValues:o,skipContentLengthHeader:r}=e;this.command=t,this.headers=Object.assign({},n||{}),i?(this._binaryBody=i,this.isBinaryBody=!0):(this._body=s||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=r||!1}static fromRawFrame(e,t){const n={},s=e=>e.replace(/^\s+|\s+$/g,"");for(const i of e.headers.reverse()){i.indexOf(":");const o=s(i[0]);let r=s(i[1]);t&&"CONNECT"!==e.command&&"CONNECTED"!==e.command&&(r=u.hdrValueUnEscape(r)),n[o]=r}return new u({command:e.command,headers:n,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?u.toUnit8Array(e,this._binaryBody).buffer:e+this._body+l.NULL}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const n=this.headers[t];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?e.push(`${t}:${u.hdrValueEscape(`${n}`)}`):e.push(`${t}:${n}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(l.LF)+l.LF+l.LF}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?(new TextEncoder).encode(e).length:0}static toUnit8Array(e,t){const n=(new TextEncoder).encode(e),s=new Uint8Array([0]),i=new Uint8Array(n.length+t.length+s.length);return i.set(n),i.set(t,n.length),i.set(s,n.length+t.length),i}static marshall(e){const t=new u(e);return t.serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const h=0,d=10,p=13,f=58;class m{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let n;if(n="string"===typeof e?this._encoder.encode(e):new Uint8Array(e),t&&0!==n[n.length-1]){const e=new Uint8Array(n.length+1);e.set(n,0),e[n.length]=0,n=e}for(let s=0;s<n.length;s++){const e=n[s];this._onByte(e)}}_collectFrame(e){e!==h&&e!==p&&(e!==d?(this._onByte=this._collectCommand,this._reinjectByte(e)):this.onIncomingPing())}_collectCommand(e){if(e!==p)return e===d?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_collectHeaders(e){e!==p&&(e!==d?(this._onByte=this._collectHeaderKey,this._reinjectByte(e)):this._setupCollectBody())}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===f)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(e)}_collectHeaderValue(e){if(e!==p)return e===d?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_setupCollectBody(){const e=this._results.headers.filter((e=>"content-length"===e[0]))[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){e!==h?this._consumeByte(e):this._retrievedBody()}_collectBodyFixedSize(e){0!==this._bodyBytesRemaining--?this._consumeByte(e):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var g,b,v,y;(function(e){e[e["CONNECTING"]=0]="CONNECTING",e[e["OPEN"]=1]="OPEN",e[e["CLOSING"]=2]="CLOSING",e[e["CLOSED"]=3]="CLOSED"})(g||(g={})),function(e){e[e["ACTIVE"]=0]="ACTIVE",e[e["DEACTIVATING"]=1]="DEACTIVATING",e[e["INACTIVE"]=2]="INACTIVE"}(b||(b={})),function(e){e[e["LINEAR"]=0]="LINEAR",e[e["EXPONENTIAL"]=1]="EXPONENTIAL"}(v||(v={})),function(e){e["Interval"]="interval",e["Worker"]="worker"}(y||(y={}));class _{constructor(e,t=y.Interval,n){this._interval=e,this._strategy=t,this._debug=n,this._workerScript=`\n    var startTime = Date.now();\n    setInterval(function() {\n        self.postMessage(Date.now() - startTime);\n    }, ${this._interval});\n  `}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return"undefined"!==typeof Worker&&this._strategy===y.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=t=>e(t.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const t=Date.now();this._timer=setInterval((()=>{e(Date.now()-t)}),this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class w{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,t,n){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:e=>{this.debug(`connected to server ${e.headers.server}`),this._connected=!0,this._connectedVersion=e.headers.version,this._connectedVersion===a.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(e.headers),this.onConnect(e)},MESSAGE:e=>{const t=e.headers.subscription,n=this._subscriptions[t]||this.onUnhandledMessage,s=e,i=this,o=this._connectedVersion===a.V1_2?s.headers.ack:s.headers["message-id"];s.ack=(e={})=>i.ack(o,t,e),s.nack=(e={})=>i.nack(o,t,e),n(s)},RECEIPT:e=>{const t=this._receiptWatchers[e.headers["receipt-id"]];t?(t(e),delete this._receiptWatchers[e.headers["receipt-id"]]):this.onUnhandledReceipt(e)},ERROR:e=>{this.onStompError(e)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=n.debug,this.stompVersions=n.stompVersions,this.connectHeaders=n.connectHeaders,this.disconnectHeaders=n.disconnectHeaders,this.heartbeatIncoming=n.heartbeatIncoming,this.heartbeatOutgoing=n.heartbeatOutgoing,this.splitLargeFrames=n.splitLargeFrames,this.maxWebSocketChunkSize=n.maxWebSocketChunkSize,this.forceBinaryWSFrames=n.forceBinaryWSFrames,this.logRawCommunication=n.logRawCommunication,this.appendMissingNULLonIncoming=n.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=n.discardWebsocketOnCommFailure,this.onConnect=n.onConnect,this.onDisconnect=n.onDisconnect,this.onStompError=n.onStompError,this.onWebSocketClose=n.onWebSocketClose,this.onWebSocketError=n.onWebSocketError,this.onUnhandledMessage=n.onUnhandledMessage,this.onUnhandledReceipt=n.onUnhandledReceipt,this.onUnhandledFrame=n.onUnhandledFrame}start(){const e=new m((e=>{const t=u.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${t}`);const n=this._serverFrameHandlers[t.command]||this.onUnhandledFrame;n(t)}),(()=>{this.debug("<<< PONG")}));this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const e=t.data instanceof ArrayBuffer?(new TextDecoder).decode(t.data):t.data;this.debug(`<<< ${e}`)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=e=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(e){if(e.version!==a.V1_1&&e.version!==a.V1_2)return;if(!e["heart-beat"])return;const[t,n]=e["heart-beat"].split(",").map((e=>parseInt(e,10)));if(0!==this.heartbeatOutgoing&&0!==n){const e=Math.max(this.heartbeatOutgoing,n);this.debug(`send PING every ${e}ms`),this._pinger=new _(e,this._client.heartbeatStrategy,this.debug),this._pinger.start((()=>{this._webSocket.readyState===g.OPEN&&(this._webSocket.send(l.LF),this.debug(">>> PING"))}))}if(0!==this.heartbeatIncoming&&0!==t){const e=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${e}ms`),this._ponger=setInterval((()=>{const t=Date.now()-this._lastServerActivityTS;t>2*e&&(this.debug(`did not receive server activity for the last ${t}ms`),this._closeOrDiscardWebsocket())}),e)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState!==g.CONNECTING&&this._webSocket.readyState!==g.OPEN||this._closeOrDiscardWebsocket())}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){"function"!==typeof this._webSocket.terminate&&c(this._webSocket,(e=>this.debug(e))),this._webSocket.terminate()}_transmit(e){const{command:t,headers:n,body:s,binaryBody:i,skipContentLengthHeader:o}=e,r=new u({command:t,headers:n,body:s,binaryBody:i,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let a=r.serialize();if(this.logRawCommunication?this.debug(`>>> ${a}`):this.debug(`>>> ${r}`),this.forceBinaryWSFrames&&"string"===typeof a&&(a=(new TextEncoder).encode(a)),"string"===typeof a&&this.splitLargeFrames){let e=a;while(e.length>0){const t=e.substring(0,this.maxWebSocketChunkSize);e=e.substring(this.maxWebSocketChunkSize),this._webSocket.send(t),this.debug(`chunk sent = ${t.length}, remaining = ${e.length}`)}}else this._webSocket.send(a)}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt="close-"+this._counter++),this.watchForReceipt(e.receipt,(e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)})),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else this._webSocket.readyState!==g.CONNECTING&&this._webSocket.readyState!==g.OPEN||this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){const{destination:t,headers:n,body:s,binaryBody:i,skipContentLengthHeader:o}=e,r=Object.assign({destination:t},n);this._transmit({command:"SEND",headers:r,body:s,binaryBody:i,skipContentLengthHeader:o})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,n={}){n=Object.assign({},n),n.id||(n.id="sub-"+this._counter++),n.destination=e,this._subscriptions[n.id]=t,this._transmit({command:"SUBSCRIBE",headers:n});const s=this;return{id:n.id,unsubscribe(e){return s.unsubscribe(n.id,e)}}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:t}});const n=this;return{id:t,commit(){n.commit(t)},abort(){n.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,n={}){n=Object.assign({},n),this._connectedVersion===a.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"ACK",headers:n})}nack(e,t,n={}){return n=Object.assign({},n),this._connectedVersion===a.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"NACK",headers:n})}}class x{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===b.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(e={}){this.stompVersions=a.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=9e5,this.reconnectTimeMode=v.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=y.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=b.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const e=()=>{this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(b.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect())};this.state===b.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then((()=>{e()}))):e()}async _connect(){if(await this.beforeConnect(this),this._stompHandler)return void this.debug("There is already a stompHandler, skipping the call to connect");if(!this.active)return void this.debug("Client has been marked inactive, will not attempt to connect");this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout((()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())}),this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new w(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active)return this.debug("STOMP got connected while deactivate was issued, will disconnect now"),void this._disposeStompHandler();this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===b.DEACTIVATING&&this._changeState(b.INACTIVE),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)}}),this._stompHandler.start()}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else{if(!this.brokerURL)throw new Error("Either brokerURL or webSocketFactory must be provided");e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())}return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout((()=>{this.reconnectTimeMode===v.EXPONENTIAL&&(this._nextReconnectDelay=2*this._nextReconnectDelay,0!==this.maxReconnectDelay&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()}),this._nextReconnectDelay))}async deactivate(e={}){const t=e.force||!1,n=this.active;let s;if(this.state===b.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(b.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),!this._stompHandler||this.webSocket.readyState===g.CLOSED)return this._changeState(b.INACTIVE),Promise.resolve();{const e=this._stompHandler.onWebSocketClose;s=new Promise(((t,n)=>{this._stompHandler.onWebSocketClose=n=>{e(n),t()}}))}return t?this._stompHandler?.discardWebsocket():n&&this._disposeStompHandler(),s}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,n={}){return this._checkConnection(),this._stompHandler.subscribe(e,t,n)}unsubscribe(e,t={}){this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t,n={}){this._checkConnection(),this._stompHandler.ack(e,t,n)}nack(e,t,n={}){this._checkConnection(),this._stompHandler.nack(e,t,n)}}class S{constructor(e){this.client=e}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(e){this.client.heartbeatOutgoing=e}get incoming(){return this.client.heartbeatIncoming}set incoming(e){this.client.heartbeatIncoming=e}}class C extends x{constructor(e){super(),this.maxWebSocketFrameSize=16384,this._heartbeatInfo=new S(this),this.reconnect_delay=0,this.webSocketFactory=e,this.debug=(...e)=>{console.log(...e)}}_parseConnect(...e){let t,n,s,i={};if(e.length<2)throw new Error("Connect requires at least 2 arguments");if("function"===typeof e[1])[i,n,s,t]=e;else switch(e.length){case 6:[i.login,i.passcode,n,s,t,i.host]=e;break;default:[i.login,i.passcode,n,s,t]=e}return[i,n,s,t]}connect(...e){const t=this._parseConnect(...e);t[0]&&(this.connectHeaders=t[0]),t[1]&&(this.onConnect=t[1]),t[2]&&(this.onStompError=t[2]),t[3]&&(this.onWebSocketClose=t[3]),super.activate()}disconnect(e,t={}){e&&(this.onDisconnect=e),this.disconnectHeaders=t,super.deactivate()}send(e,t={},n=""){t=Object.assign({},t);const s=!1===t["content-length"];s&&delete t["content-length"],this.publish({destination:e,headers:t,body:n,skipContentLengthHeader:s})}set reconnect_delay(e){this.reconnectDelay=e}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(e){this.onUnhandledMessage=e}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(e){this.onUnhandledReceipt=e}get heartbeat(){return this._heartbeatInfo}set heartbeat(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing}}class T{static client(e,t){null==t&&(t=a.default.protocolVersions());const n=()=>{const n=T.WebSocketClass||WebSocket;return new n(e,t)};return new C(n)}static over(e){let t;return"function"===typeof e?t=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),t=()=>e),new C(t)}}T.WebSocketClass=null;var k={name:"OnlineConsultation",data(){return{offlineTestMode:!0,loading:!1,searchQuery:"",filterSubject:"",filterAvailability:null,teachers:[],currentPage:1,pageSize:12,totalTeachers:0,defaultAvatar:"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",stompClient:null,subscription:null,isConnected:!1,consultationDialogVisible:!1,selectedTeacher:null,consultationForm:{topic:"",message:""},consultationRules:{topic:[{required:!0,message:"请输入咨询主题",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],message:[{required:!0,message:"请输入咨询内容",trigger:"blur"},{min:5,max:500,message:"长度在 5 到 500 个字符",trigger:"blur"}]},sendingRequest:!1,requestStatus:null,waitingForTeacher:!1,waitingTimeLeft:300,waitingTimer:null,waitingProgress:100,requestId:null,activeConsultation:null,consultationMessages:[],newMessage:"",messageInputDisabled:!1,endDialogVisible:!1,endedWithError:!1,endReason:"",consultationRating:0,consultationFeedback:"",ratingColors:["#99A9BF","#F7BA2A","#FF9900"]}},methods:{fetchTeachers(){if(this.loading=!0,this.offlineTestMode)return console.log("离线测试模式: 使用模拟教师数据"),void setTimeout((()=>{this.teachers=[{_id:"1",name:"张老师",subjects:["数学","物理"],isOnline:!0,avatar:""},{_id:"2",name:"王老师",subjects:["英语"],isOnline:!0,avatar:""},{_id:"3",name:"李老师",subjects:["化学"],isOnline:!1,avatar:""},{_id:"4",name:"赵老师",subjects:["生物"],isOnline:!0,avatar:""},{_id:"5",name:"钱老师",subjects:["历史","政治"],isOnline:!0,avatar:""},{_id:"6",name:"孙老师",subjects:["地理"],isOnline:!1,avatar:""}],this.totalTeachers=6,this.loading=!1}),500);const e={page:this.currentPage,limit:this.pageSize,search:this.searchQuery,subject:this.filterSubject,isOnline:this.filterAvailability};this.$http.get("/api/teachers/available",{params:e}).then((e=>{this.teachers=e.data.teachers||[],this.totalTeachers=e.data.total||0,this.teachers.forEach((e=>{void 0===e.isOnline&&(e.isOnline=Math.random()>.5)}))})).catch((e=>{console.error("Error fetching teachers:",e),this.$message.error("加载教师列表失败 - 使用模拟数据"),this.teachers=[{_id:"1",name:"张老师",subjects:["数学","物理"],isOnline:!0,avatar:""},{_id:"2",name:"王老师",subjects:["英语"],isOnline:!0,avatar:""},{_id:"3",name:"李老师",subjects:["化学"],isOnline:!1,avatar:""}],this.totalTeachers=3})).finally((()=>{this.loading=!1}))},handlePageChange(e){this.currentPage=e,this.fetchTeachers()},viewTeacherProfile(e){this.$router.push({name:"TeacherProfile",params:{teacherId:e}}).catch((()=>{}))},showConsultationDialog(e){this.selectedTeacher=e,this.consultationForm={topic:"",message:""},this.requestStatus=null,this.consultationDialogVisible=!0},cancelConsultation(){this.consultationDialogVisible=!1,this.selectedTeacher=null,this.consultationForm={topic:"",message:""}},submitConsultation(){this.$refs.consultationForm.validate((e=>{if(e){if(this.sendingRequest=!0,this.requestStatus=null,this.offlineTestMode)return console.log("离线测试模式: 模拟咨询请求成功"),void setTimeout((()=>this.handleConsultationRequestSent()),1e3);this.stompClient&&this.stompClient.connected?(console.warn("Consultation request via STOMP not fully implemented yet."),setTimeout((()=>this.handleConsultationRequestSent()),1e3)):(this.requestStatus={success:!1,message:"无法连接到服务，请稍后重试"},this.sendingRequest=!1,console.error("Cannot send consultation request, STOMP client not connected."))}}))},handleConsultationRequestSent(){this.requestStatus={success:!0,message:"咨询请求已发送，等待教师接受"},setTimeout((()=>{this.sendingRequest=!1,this.consultationDialogVisible=!1,this.waitingForTeacher=!0,this.requestId=`temp_${Date.now()}`,this.startWaitingTimer()}),1500)},startWaitingTimer(){this.waitingTimeLeft=300,this.waitingProgress=100,this.waitingTimer&&clearInterval(this.waitingTimer),this.waitingTimer=setInterval((()=>{this.waitingTimeLeft-=1,this.waitingProgress=Math.round(this.waitingTimeLeft/300*100),this.waitingTimeLeft<=0&&(clearInterval(this.waitingTimer),this.waitingTimer=null,this.waitingForTeacher=!1,this.requestId=null,this.showEndDialog("教师未在规定时间内接受您的请求",!0))}),1e3)},cancelWaitingRequest(){this.waitingTimer&&(clearInterval(this.waitingTimer),this.waitingTimer=null),this.requestId&&this.stompClient&&this.stompClient.connected&&this.stompClient.send("/app/consultation.cancel",{},JSON.stringify({requestId:this.requestId,reason:"学生取消了请求"})),this.waitingForTeacher=!1,this.requestId=null,this.$message({type:"info",message:"您已取消咨询请求"})},sendMessage(){if(!this.newMessage.trim()||!this.activeConsultation||this.messageInputDisabled)return;if(this.offlineTestMode){console.log("离线测试模式: 模拟发送消息");const e={senderRole:"student",senderName:this.$store.state.user?.name||"学生",message:this.newMessage.trim(),timestamp:(new Date).toISOString()};return this.consultationMessages.push(e),this.newMessage="",void setTimeout((()=>{const t={senderRole:"teacher",senderName:this.activeConsultation.teacherName,message:`这是对"${e.message.substring(0,10)}${e.message.length>10?"...":""}"的自动回复。`,timestamp:(new Date).toISOString()};this.consultationMessages.push(t),this.$nextTick((()=>{const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)}))}),1500)}if(!this.stompClient||!this.stompClient.connected)return void this.$message.error("消息服务未连接，请稍后重试");const e={senderId:this.$store.state.user?.id||"student_unknown",senderName:this.$store.state.user?.name||"Student",content:this.newMessage.trim(),consultationId:this.activeConsultation.consultationId,type:"CHAT"};this.stompClient.send(`/app/chat.sendMessage/${this.activeConsultation.consultationId}`,{},JSON.stringify(e)),this.newMessage="",this.$nextTick((()=>{const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)}))},endConsultation(){this.$confirm("确定要结束本次咨询吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{if(this.offlineTestMode)return console.log("离线测试模式: 结束咨询"),void this.showEndDialog("您已结束本次咨询");this.stompClient&&this.stompClient.connected&&this.activeConsultation&&console.warn("End consultation via STOMP not fully implemented."),this.showEndDialog("您已结束本次咨询")})).catch((()=>{}))},showEndDialog(e,t=!1){this.endDialogVisible=!0,this.endReason=e,this.endedWithError=t,this.activeConsultation=null},submitFeedbackAndReturn(){this.requestId&&(this.offlineTestMode?console.log("离线测试模式: 提交评分反馈",{rating:this.consultationRating,feedback:this.consultationFeedback}):this.$http.post(`/api/consultations/${this.requestId}/feedback`,{rating:this.consultationRating,feedback:this.consultationFeedback}).catch((e=>{console.error("Error submitting feedback:",e)}))),this.endDialogVisible=!1,this.consultationRating=0,this.consultationFeedback=""},formatTime(e){if(!e)return"";const t=new Date(e);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},initializeSocket(){if(this.offlineTestMode)return console.log("离线测试模式: 跳过WebSocket连接"),void(this.isConnected=!0);if(this.stompClient&&this.stompClient.connected)return void console.log("STOMP client already connected.");const e="http://localhost:8085/ws";console.log(`尝试连接STOMP端点: ${e}`);const t=new(r())(e);this.stompClient=T.over(t),this.stompClient.debug=null,this.stompClient.connect({},(e=>{console.log("STOMP Connected: "+e),this.isConnected=!0,this.$message.success("已连接到实时消息服务")}),(e=>{console.error("STOMP Connection Error:",e),this.isConnected=!1,this.$message.error("无法连接到实时消息服务，请检查后端服务是否正常运行")}))},subscribeToConsultationTopic(e){if(e)if(this.stompClient&&this.stompClient.connected){this.subscription&&(this.subscription.unsubscribe(),console.log("Unsubscribed from previous topic."));const t=`/topic/consultation/${e}`;this.subscription=this.stompClient.subscribe(t,(e=>{try{const t=JSON.parse(e.body);this.handleReceivedMessage(t)}catch(t){console.error("Error parsing received message:",t,e.body)}})),console.log(`Subscribed to ${t}`);const n={senderId:this.$store.state.user?.id||"student_unknown",senderName:this.$store.state.user?.name||"Student",type:"JOIN",consultationId:e};this.stompClient.send(`/app/chat.addUser/${e}`,{},JSON.stringify(n))}else console.error("Cannot subscribe, STOMP client not connected."),this.$message.error("无法订阅咨询消息，连接已断开");else console.error("Cannot subscribe: consultationId is missing.")},handleReceivedMessage(e){if(console.log("Message received: ",e),!e||!e.type||!e.senderName)return void console.warn("Received invalid message format:",e);let t={};"CHAT"===e.type?t={senderRole:e.senderId===(this.$store.state.user?.id||"student_unknown")?"student":"teacher",senderName:e.senderName,message:e.content,timestamp:e.timestamp||(new Date).toISOString()}:"JOIN"===e.type?t={senderRole:"system",senderName:"System",message:`${e.senderName} 已加入咨询。`,timestamp:e.timestamp||(new Date).toISOString()}:"LEAVE"===e.type&&(t={senderRole:"system",senderName:"System",message:`${e.senderName} 已离开咨询。`,timestamp:e.timestamp||(new Date).toISOString()}),t.message&&(this.consultationMessages.push(t),this.$nextTick((()=>{const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)})))},handleConsultationAccepted(e){if(console.log("Handling Consultation Accepted: ",e),!e||!e.requestId)return void console.error("Invalid data received for consultation accepted.");const t=e.consultationId||e.requestId;t?(this.waitingTimer&&(clearInterval(this.waitingTimer),this.waitingTimer=null),this.waitingForTeacher=!1,this.activeConsultation={requestId:e.requestId,teacherName:e.teacherName||"Teacher",consultationId:t},this.$message({type:"success",message:`教师 ${this.activeConsultation.teacherName} 已接受您的咨询请求`}),this.subscribeToConsultationTopic(this.activeConsultation.consultationId)):console.error("Consultation ID is missing in accepted data.")},disconnectStomp(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null,console.log("Unsubscribed from STOMP topic.")),this.stompClient&&this.stompClient.connected?this.stompClient.disconnect((()=>{console.log("STOMP Disconnected."),this.isConnected=!1})):console.log("STOMP client already disconnected or not initialized.")},simulateTeacherAccept(){console.log("模拟教师接受咨询"),this.handleConsultationAccepted({requestId:this.requestId,teacherName:this.selectedTeacher?.name||"模拟教师",consultationId:this.requestId})}},created(){this.fetchTeachers(),this.initializeSocket()},beforeDestroy(){this.waitingTimer&&clearInterval(this.waitingTimer),this.disconnectStomp()}},E=k,O=n(1656),I=(0,O.A)(E,s,i,!1,null,"29e38d94",null),N=I.exports},1072:function(e,t,n){"use strict";var s=n(1828),i=n(8727);e.exports=Object.keys||function(e){return s(e,i)}},1314:function(e,t,n){!function(t){e.exports=t()}((function(){return function e(t,n,s){function i(r,a){if(!n[r]){if(!t[r]){var c=void 0;if(!a&&c)return require(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[r]={exports:{}};t[r][0].call(u.exports,(function(e){return i(t[r][1][e]||e)}),u,u.exports,e,t,n,s)}return n[r].exports}for(var o=void 0,r=0;r<s.length;r++)i(s[r]);return i}({1:[function(e,t,s){(function(n){(function(){"use strict";var s=e("./transport-list");t.exports=e("./main")(s),"_sockjs_onload"in n&&setTimeout(n._sockjs_onload,1)}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./event");function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}s(o,i),t.exports=o},{"./event":4,inherits:54}],3:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./eventtarget");function o(){i.call(this)}s(o,i),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var n=this,s=!1;this.on(e,(function i(){n.removeListener(e,i),s||(s=!0,t.apply(this,arguments))}))},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,s=new Array(n-1),i=1;i<n;i++)s[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].apply(this,s)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,t.exports.EventEmitter=o},{"./eventtarget":5,inherits:54}],4:[function(e,t,n){"use strict";function s(e){this.type=e}s.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},s.prototype.stopPropagation=function(){},s.prototype.preventDefault=function(){},s.CAPTURING_PHASE=1,s.AT_TARGET=2,s.BUBBLING_PHASE=3,t.exports=s},{}],5:[function(e,t,n){"use strict";function s(){this._listeners={}}s.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},s.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var s=n.indexOf(t);-1===s||(1<n.length?this._listeners[e]=n.slice(0,s).concat(n.slice(s+1)):delete this._listeners[e])}},s.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var s=this._listeners[t],i=0;i<s.length;i++)s[i].apply(this,n)},t.exports=s},{}],6:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./event");function o(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}s(o,i),t.exports=o},{"./event":4,inherits:54}],7:[function(e,t,n){"use strict";var s=e("./utils/iframe");function i(e){(this._transport=e).on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){s.postMessage("c",JSON.stringify([e,t]))},i.prototype._transportMessage=function(e){s.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=i},{"./utils/iframe":47}],8:[function(e,t,n){"use strict";var s=e("./utils/url"),i=e("./utils/event"),o=e("./facade"),r=e("./info-iframe-receiver"),a=e("./utils/iframe"),c=e("./location"),l=function(){};t.exports=function(e,t){var n,u={};t.forEach((function(e){e.facadeTransport&&(u[e.facadeTransport.transportName]=e.facadeTransport)})),u[r.transportName]=r,e.bootstrap_iframe=function(){var t;a.currentWindowId=c.hash.slice(1),i.attachEvent("message",(function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var r;try{r=JSON.parse(i.data)}catch(h){return void l("bad json",i.data)}if(r.windowId===a.currentWindowId)switch(r.type){case"s":var h;try{h=JSON.parse(r.data)}catch(h){l("bad json",r.data);break}var d=h[0],p=h[1],f=h[2],m=h[3];if(l(d,p,f,m),d!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+d+'", the iframe: "'+e.version+'".');if(!s.isOriginEqual(f,c.href)||!s.isOriginEqual(m,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+f+", "+m+")");t=new o(new u[p](f,m));break;case"m":t._send(r.data);break;case"c":t&&t._close(),t=null}}})),a.postMessage("s")}}},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:void 0}],9:[function(e,t,n){"use strict";var s=e("events").EventEmitter,i=e("inherits"),o=e("./utils/object"),r=function(){};function a(e,t){s.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var s,a;if(200===e){if(a=+new Date-i,t)try{s=JSON.parse(t)}catch(e){r("bad json",t)}o.isObject(s)||(s={})}n.emit("finish",s,a),n.removeAllListeners()}))}i(a,s),a.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=a},{"./utils/object":49,debug:void 0,events:3,inherits:54}],10:[function(e,t,n){"use strict";var s=e("inherits"),i=e("events").EventEmitter,o=e("./transport/sender/xhr-local"),r=e("./info-ajax");function a(e){var t=this;i.call(this),this.ir=new r(e,o),this.ir.once("finish",(function(e,n){t.ir=null,t.emit("message",JSON.stringify([e,n]))}))}s(a,i),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=a},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54}],11:[function(e,t,s){(function(n){(function(){"use strict";var s=e("events").EventEmitter,i=e("inherits"),o=e("./utils/event"),r=e("./transport/iframe"),a=e("./info-iframe-receiver"),c=function(){};function l(e,t){var i=this;function l(){var n=i.ifr=new r(a.transportName,t,e);n.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(t){return c("bad json",e),i.emit("finish"),void i.close()}var n=t[0],s=t[1];i.emit("finish",n,s)}i.close()})),n.once("close",(function(){i.emit("finish"),i.close()}))}s.call(this),n.document.body?l():o.attachEvent("load",l)}i(l,s),l.enabled=function(){return r.enabled()},l.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=l}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:void 0,events:3,inherits:54}],12:[function(e,t,n){"use strict";var s=e("events").EventEmitter,i=e("inherits"),o=e("./utils/url"),r=e("./transport/sender/xdr"),a=e("./transport/sender/xhr-cors"),c=e("./transport/sender/xhr-local"),l=e("./transport/sender/xhr-fake"),u=e("./info-iframe"),h=e("./info-ajax"),d=function(){};function p(e,t){d(e);var n=this;s.call(this),setTimeout((function(){n.doXhr(e,t)}),0)}i(p,s),p._getReceiver=function(e,t,n){return n.sameOrigin?new h(t,c):a.enabled?new h(t,a):r.enabled&&n.sameScheme?new h(t,r):u.enabled()?new u(e,t):new h(t,l)},p.prototype.doXhr=function(e,t){var n=this,s=o.addPath(e,"/info");d("doXhr",s),this.xo=p._getReceiver(e,s,t),this.timeoutRef=setTimeout((function(){d("timeout"),n._cleanup(!1),n.emit("finish")}),p.timeout),this.xo.once("finish",(function(e,t){d("finish",e,t),n._cleanup(!0),n.emit("finish",e,t)}))},p.prototype._cleanup=function(e){d("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},p.prototype.close=function(){d("close"),this.removeAllListeners(),this._cleanup(!1)},p.timeout=8e3,t.exports=p},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:void 0,events:3,inherits:54}],13:[function(e,t,s){(function(e){(function(){"use strict";t.exports=e.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,s){(function(n){(function(){"use strict";e("./shims");var s,i=e("url-parse"),o=e("inherits"),r=e("./utils/random"),a=e("./utils/escape"),c=e("./utils/url"),l=e("./utils/event"),u=e("./utils/transport"),h=e("./utils/object"),d=e("./utils/browser"),p=e("./utils/log"),f=e("./event/event"),m=e("./event/eventtarget"),g=e("./location"),b=e("./event/close"),v=e("./event/trans-message"),y=e("./info-receiver"),_=function(){};function w(e,t,n){if(!(this instanceof w))return new w(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");m.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&p.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var s=n.sessionId||8;if("function"==typeof s)this._generateSessionId=s;else{if("number"!=typeof s)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return r.string(s)}}this._server=n.server||r.numberString(1e3);var o=new i(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var a="https:"===o.protocol;if("https:"===g.protocol&&!a&&!c.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<l.length-1&&e===l[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var u=c.getOrigin(g.href);this._origin=u?u.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,_("using url",this.url),this._urlInfo={nullOrigin:!d.hasDomain(),sameOrigin:c.isOriginEqual(this.url,g.href),sameScheme:c.isSchemeEqual(this.url,g.href)},this._ir=new y(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function x(e){return 1e3===e||3e3<=e&&e<=4999}o(w,m),w.prototype.close=function(e,t){if(e&&!x(e))throw new Error("InvalidAccessError: Invalid code");if(t&&123<t.length)throw new SyntaxError("reason argument has an invalid length");this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED&&this._close(e||1e3,t||"Normal closure",!0)},w.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(a.quote(e))},w.version=e("./version"),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(e,t){if(_("_receiveInfo",t),this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),_("info",e);var n=s.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,_(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(_("attempt",e.transportName),e.needBody&&(!n.document.body||void 0!==n.document.readyState&&"complete"!==n.document.readyState&&"interactive"!==n.document.readyState))return _("waiting for body"),this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),_("using timeout",t);var s=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName];_("transport url",s);var o=new e(s,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},w.prototype._transportTimeout=function(){_("_transportTimeout"),this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},w.prototype._transportMessage=function(e){_("_transportMessage",e);var t,n=this,s=e.slice(0,1),i=e.slice(1);switch(s){case"o":return void this._open();case"h":return this.dispatchEvent(new f("heartbeat")),void _("heartbeat",this.transport)}if(i)try{t=JSON.parse(i)}catch(e){_("bad json",i)}if(void 0!==t)switch(s){case"a":Array.isArray(t)&&t.forEach((function(e){_("message",n.transport,e),n.dispatchEvent(new v(e))}));break;case"m":_("message",this.transport,t),this.dispatchEvent(new v(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}else _("empty payload",i)},w.prototype._transportClose=function(e,t){_("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),x(e)||2e3===e||this.readyState!==w.CONNECTING?this._close(e,t):this._connect()},w.prototype._open=function(){_("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),_("connected",this.transport)):this._close(1006,"Server lost session")},w.prototype._close=function(e,t,n){_("_close",this.transport,e,t,n,this.readyState);var s=!1;if(this._ir&&(s=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout(function(){this.readyState=w.CLOSED,s&&this.dispatchEvent(new f("error"));var i=new b("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null,_("disconnected")}.bind(this),0)},w.prototype.countRTO=function(e){return 100<e?4*e:300+e},t.exports=function(t){return s=u(t),e("./iframe-bootstrap")(w,t),w}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:void 0,inherits:54,"url-parse":57}],15:[function(e,t,n){"use strict";function s(e){return"[object Function]"===a.toString.call(e)}function i(e){return"[object String]"===h.call(e)}var o,r=Array.prototype,a=Object.prototype,c=Function.prototype,l=String.prototype,u=r.slice,h=a.toString,d=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();function p(e,t,n){for(var s in t)a.hasOwnProperty.call(t,s)&&o(e,s,t[s],n)}function f(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}function m(){}o=d?function(e,t,n,s){!s&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,s){!s&&t in e||(e[t]=n)},p(c,{bind:function(e){var t=this;if(!s(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=u.call(arguments,1),i=Math.max(0,t.length-n.length),o=[],r=0;r<i;r++)o.push("$"+r);var a=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")((function(){if(this instanceof a){var s=t.apply(this,n.concat(u.call(arguments)));return Object(s)===s?s:this}return t.apply(e,n.concat(u.call(arguments)))}));return t.prototype&&(m.prototype=t.prototype,a.prototype=new m,m.prototype=null),a}}),p(Array,{isArray:function(e){return"[object Array]"===h.call(e)}});var g,b,v,y=Object("a"),_="a"!==y[0]||!(0 in y);p(r,{forEach:function(e,t){var n=f(this),o=_&&i(this)?this.split(""):n,r=t,a=-1,c=o.length>>>0;if(!s(e))throw new TypeError;for(;++a<c;)a in o&&e.call(r,o[a],a,n)}},(g=r.forEach,v=b=!0,g&&(g.call("foo",(function(e,t,n){"object"!=typeof n&&(b=!1)})),g.call([1],(function(){v="string"==typeof this}),"x")),!(g&&b&&v)));var w=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);p(r,{indexOf:function(e,t){var n=_&&i(this)?this.split(""):f(this),s=n.length>>>0;if(!s)return-1;var o=0;for(1<arguments.length&&(o=function(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(0<t||-1)*Math.floor(Math.abs(t))),t}(t)),o=0<=o?o:Math.max(0,s+o);o<s;o++)if(o in n&&n[o]===e)return o;return-1}},w);var x,S=l.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||1<".".split(/()()/).length?(x=void 0===/()??/.exec("")[1],l.split=function(e,t){var n=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==h.call(e))return S.call(this,e,t);var s,i,o,a,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),u=0;for(e=new RegExp(e.source,l+"g"),n+="",x||(s=new RegExp("^"+e.source+"$(?!\\s)",l)),t=void 0===t?-1>>>0:function(e){return e>>>0}(t);(i=e.exec(n))&&!(u<(o=i.index+i[0].length)&&(c.push(n.slice(u,i.index)),!x&&1<i.length&&i[0].replace(s,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(i[e]=void 0)})),1<i.length&&i.index<n.length&&r.push.apply(c,i.slice(1)),a=i[0].length,u=o,c.length>=t));)e.lastIndex===i.index&&e.lastIndex++;return u===n.length?!a&&e.test("")||c.push(""):c.push(n.slice(u)),c.length>t?c.slice(0,t):c}):"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:S.call(this,e,t)});var C=l.substr,T="".substr&&"b"!=="0b".substr(-1);p(l,{substr:function(e,t){return C.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},T)},{}],16:[function(e,t,n){"use strict";t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,t,s){(function(n){(function(){"use strict";var s=e("events").EventEmitter,i=e("inherits"),o=e("../../utils/event"),r=e("../../utils/url"),a=n.XMLHttpRequest,c=function(){};function l(e,t,n,i){c(e,t);var o=this;s.call(this),setTimeout((function(){o._start(e,t,n,i)}),0)}i(l,s),l.prototype._start=function(e,t,n,s){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=r.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd((function(){c("unload cleanup"),i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return c("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(s&&s.noCredentials||!l.supportsCORS||(c("withCredentials"),this.xhr.withCredentials=!0),s&&s.headers)for(var u in s.headers)this.xhr.setRequestHeader(u,s.headers[u]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(c("readyState",n.readyState),n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}c("status",t),1223===t&&(t=204),200===t&&e&&0<e.length&&(c("chunk"),i.emit("chunk",t,e));break;case 4:t=n.status,c("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),c("finish",t,n.responseText),i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},l.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},l.prototype.close=function(){c("close"),this._cleanup(!0)},l.enabled=!!a;var u=["Active"].concat("Object").join("X");!l.enabled&&u in n&&(c("overriding xmlhttprequest"),l.enabled=!!new(a=function(){try{return new n[u]("Microsoft.XMLHTTP")}catch(i){return null}}));var h=!1;try{h="withCredentials"in new a}catch(i){}l.supportsCORS=h,t.exports=l}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],18:[function(e,t,s){(function(e){(function(){t.exports=e.EventSource}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,s){(function(e){(function(){"use strict";var n=e.WebSocket||e.MozWebSocket;t.exports=n?function(e){return new n(e)}:void 0}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./lib/ajax-based"),o=e("./receiver/eventsource"),r=e("./sender/xhr-cors"),a=e("eventsource");function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",o,r)}s(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,t.exports=c},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./receiver/htmlfile"),o=e("./sender/xhr-local"),r=e("./lib/ajax-based");function a(e){if(!i.enabled)throw new Error("Transport created when disabled");r.call(this,e,"/htmlfile",i,o)}s(a,r),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,t.exports=a},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:54}],22:[function(e,t,n){"use strict";var s=e("inherits"),i=e("events").EventEmitter,o=e("../version"),r=e("../utils/url"),a=e("../utils/iframe"),c=e("../utils/event"),l=e("../utils/random"),u=function(){};function h(e,t,n){if(!h.enabled())throw new Error("Transport created when disabled");i.call(this);var s=this;this.origin=r.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var o=r.addPath(n,"/iframe.html")+"#"+this.windowId;u(e,t,o),this.iframeObj=a.createIframe(o,(function(e){u("err callback"),s.emit("close",1006,"Unable to load an iframe ("+e+")"),s.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}s(h,i),h.prototype.close=function(){if(u("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},h.prototype._message=function(e){if(u("message",e.data),r.isOriginEqual(e.origin,this.origin)){var t;try{t=JSON.parse(e.data)}catch(n){return void u("bad json",e.data)}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([o,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch(n){return void u("bad json",t.data)}this.emit("close",n[0],n[1]),this.close()}else u("mismatched window id",t.windowId,this.windowId)}else u("not same origin",e.origin,this.origin)},h.prototype.postMessage=function(e,t){u("postMessage",e,t),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},h.prototype.send=function(e){u("send",e),this.postMessage("m",e)},h.enabled=function(){return a.iframeEnabled},h.transportName="iframe",h.roundTrips=2,t.exports=h},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:void 0,events:3,inherits:54}],23:[function(e,t,s){(function(n){(function(){"use strict";var s=e("inherits"),i=e("./lib/sender-receiver"),o=e("./receiver/jsonp"),r=e("./sender/jsonp");function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",r,o)}s(a,i),a.enabled=function(){return!!n.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,t.exports=a}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(e,t,n){"use strict";var s=e("inherits"),i=e("../../utils/url"),o=e("./sender-receiver"),r=function(){};function a(e,t,n,s){o.call(this,e,t,function(e){return function(t,n,s){r("create ajax sender",t,n);var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var a=i.addPath(t,"/xhr_send"),c=new e("POST",a,n,o);return c.once("finish",(function(e){if(r("finish",e),c=null,200!==e&&204!==e)return s(new Error("http status "+e));s()})),function(){r("abort"),c.close(),c=null;var e=new Error("Aborted");e.code=1e3,s(e)}}}(s),n,s)}s(a,o),t.exports=a},{"../../utils/url":52,"./sender-receiver":28,debug:void 0,inherits:54}],25:[function(e,t,n){"use strict";var s=e("inherits"),i=e("events").EventEmitter,o=function(){};function r(e,t){o(e),i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}s(r,i),r.prototype.send=function(e){o("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){o("sendScheduleWait");var e,t=this;this.sendStop=function(){o("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){o("timeout"),t.sendStop=null,t.sendSchedule()}),25)},r.prototype.sendSchedule=function(){o("sendSchedule",this.sendBuffer.length);var e=this;if(0<this.sendBuffer.length){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(o("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},r.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},r.prototype.close=function(){o("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=r},{debug:void 0,events:3,inherits:54}],26:[function(e,t,s){(function(n){(function(){"use strict";var s=e("inherits"),i=e("../iframe"),o=e("../../utils/object");t.exports=function(e){function t(t,n){i.call(this,e.transportName,t,n)}return s(t,i),t.enabled=function(t,s){if(!n.document)return!1;var r=o.extend({},s);return r.sameOrigin=!0,e.enabled(r)&&i.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=i.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(e,t,n){"use strict";var s=e("inherits"),i=e("events").EventEmitter,o=function(){};function r(e,t,n){o(t),i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}s(r,i),r.prototype._scheduleReceiver=function(){o("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){o("message",t),e.emit("message",t)})),t.once("close",(function(n,s){o("close",n,s,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===s?e._scheduleReceiver():(e.emit("close",n||1006,s),e.removeAllListeners()))}))},r.prototype.abort=function(){o("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=r},{debug:void 0,events:3,inherits:54}],28:[function(e,t,n){"use strict";var s=e("inherits"),i=e("../../utils/url"),o=e("./buffered-sender"),r=e("./polling"),a=function(){};function c(e,t,n,s,c){var l=i.addPath(e,t);a(l);var u=this;o.call(this,e,n),this.poll=new r(s,l,c),this.poll.on("message",(function(e){a("poll message",e),u.emit("message",e)})),this.poll.once("close",(function(e,t){a("poll close",e,t),u.poll=null,u.emit("close",e,t),u.close()}))}s(c,o),c.prototype.close=function(){o.prototype.close.call(this),a("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},t.exports=c},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:void 0,inherits:54}],29:[function(e,t,n){"use strict";var s=e("inherits"),i=e("events").EventEmitter,o=e("eventsource"),r=function(){};function a(e){r(e),i.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){r("message",e.data),t.emit("message",decodeURI(e.data))},n.onerror=function(e){r("error",n.readyState,e);var s=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(s)}}s(a,i),a.prototype.abort=function(){r("abort"),this._cleanup(),this._close("user")},a.prototype._cleanup=function(){r("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},a.prototype._close=function(e){r("close",e);var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},t.exports=a},{debug:void 0,events:3,eventsource:18,inherits:54}],30:[function(e,t,s){(function(n){(function(){"use strict";var s=e("inherits"),i=e("../../utils/iframe"),o=e("../../utils/url"),r=e("events").EventEmitter,a=e("../../utils/random"),c=function(){};function l(e){c(e),r.call(this);var t=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=o.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c("using htmlfile",l.htmlfileEnabled);var s=l.htmlfileEnabled?i.createHtmlfile:i.createIframe;n[i.WPrefix][this.id]={start:function(){c("start"),t.iframeObj.loaded()},message:function(e){c("message",e),t.emit("message",e)},stop:function(){c("stop"),t._cleanup(),t._close("network")}},this.iframeObj=s(e,(function(){c("callback"),t._cleanup(),t._close("permanent")}))}s(l,r),l.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},l.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n[i.WPrefix][this.id]},l.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},l.htmlfileEnabled=!1;var u=["Active"].concat("Object").join("X");if(u in n)try{l.htmlfileEnabled=!!new n[u]("htmlfile")}catch(s){}l.enabled=l.htmlfileEnabled||i.iframeEnabled,t.exports=l}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],31:[function(e,t,s){(function(n){(function(){"use strict";var s=e("../../utils/iframe"),i=e("../../utils/random"),o=e("../../utils/browser"),r=e("../../utils/url"),a=e("inherits"),c=e("events").EventEmitter,l=function(){};function u(e){l(e);var t=this;c.call(this),s.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=r.addQuery(e,"c="+encodeURIComponent(s.WPrefix+"."+this.id));n[s.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout((function(){l("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),u.timeout)}a(u,c),u.prototype.abort=function(){if(l("abort"),n[s.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},u.timeout=35e3,u.scriptErrorTimeout=1e3,u.prototype._callback=function(e){l("_callback",e),this._cleanup(),this.aborting||(e&&(l("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},u.prototype._abort=function(e){l("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},u.prototype._cleanup=function(){if(l("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n[s.WPrefix][this.id]},u.prototype._scriptError=function(){l("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),u.scriptErrorTimeout))},u.prototype._createScript=function(e){l("_createScript",e);var t,s=this,r=this.script=n.document.createElement("script");if(r.id="a"+i.string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=this._scriptError.bind(this),r.onload=function(){l("onload"),s._abort(new Error("JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(){if(l("onreadystatechange",r.readyState),/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){s.loadedOkay=!0;try{r.onclick()}catch(e){}}r&&s._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===r.async&&n.document.attachEvent)if(o.isOpera())(t=this.script2=n.document.createElement("script")).text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=t.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(e){}r.async=!0}void 0!==r.async&&(r.async=!0);var a=n.document.getElementsByTagName("head")[0];a.insertBefore(r,a.firstChild),t&&a.insertBefore(t,a.firstChild)},t.exports=u}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:void 0,events:3,inherits:54}],32:[function(e,t,n){"use strict";var s=e("inherits"),i=e("events").EventEmitter,o=function(){};function r(e,t){o(e),i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){o("finish",e,t),n._chunkHandler(e,t),n.xo=null;var s=200===e?"network":"permanent";o("close",s),n.emit("close",null,s),n._cleanup()}))}s(r,i),r.prototype._chunkHandler=function(e,t){if(o("_chunkHandler",e),200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var s=t.slice(this.bufferPosition);if(-1===(n=s.indexOf("\n")))break;var i=s.slice(0,n);i&&(o("message",i),this.emit("message",i))}},r.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},r.prototype.abort=function(){o("abort"),this.xo&&(this.xo.close(),o("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=r},{debug:void 0,events:3,inherits:54}],33:[function(e,t,s){(function(n){(function(){"use strict";var s,i,o=e("../../utils/random"),r=e("../../utils/url"),a=function(){};t.exports=function(e,t,c){a(e,t),s||(a("createForm"),(s=n.document.createElement("form")).style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",(i=n.document.createElement("textarea")).name="d",s.appendChild(i),n.document.body.appendChild(s));var l="a"+o.string(8);s.target=l,s.action=r.addQuery(r.addPath(e,"/jsonp_send"),"i="+l);var u=function(t){a("createIframe",t);try{return n.document.createElement('<iframe name="'+t+'">')}catch(e){var s=n.document.createElement("iframe");return s.name=t,s}}(l);u.id=l,u.style.display="none",s.appendChild(u);try{i.value=t}catch(e){}function h(e){a("completed",l,e),u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout((function(){a("cleaning up",l),u.parentNode.removeChild(u),u=null}),500),i.value="",c(e))}return s.submit(),u.onerror=function(){a("onerror",l),h()},u.onload=function(){a("onload",l),h()},u.onreadystatechange=function(e){a("onreadystatechange",l,u.readyState,e),"complete"===u.readyState&&h()},function(){a("aborted",l),h(new Error("Aborted"))}}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:void 0}],34:[function(e,t,s){(function(n){(function(){"use strict";var s=e("events").EventEmitter,i=e("inherits"),o=e("../../utils/event"),r=e("../../utils/browser"),a=e("../../utils/url"),c=function(){};function l(e,t,n){c(e,t);var i=this;s.call(this),setTimeout((function(){i._start(e,t,n)}),0)}i(l,s),l.prototype._start=function(e,t,s){c("_start");var i=this,r=new n.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),r.onerror=function(){c("onerror"),i._error()},r.ontimeout=function(){c("ontimeout"),i._error()},r.onprogress=function(){c("progress",r.responseText),i.emit("chunk",200,r.responseText)},r.onload=function(){c("load"),i.emit("finish",200,r.responseText),i._cleanup(!1)},this.xdr=r,this.unloadRef=o.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(s)}catch(e){this._error()}},l.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},l.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},l.prototype.close=function(){c("close"),this._cleanup(!0)},l.enabled=!(!n.XDomainRequest||!r.hasDomain()),t.exports=l}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:void 0,events:3,inherits:54}],35:[function(e,t,n){"use strict";var s=e("inherits"),i=e("../driver/xhr");function o(e,t,n,s){i.call(this,e,t,n,s)}s(o,i),o.enabled=i.enabled&&i.supportsCORS,t.exports=o},{"../driver/xhr":17,inherits:54}],36:[function(e,t,n){"use strict";var s=e("events").EventEmitter;function i(){var e=this;s.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),i.timeout)}e("inherits")(i,s),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,t.exports=i},{events:3,inherits:54}],37:[function(e,t,n){"use strict";var s=e("inherits"),i=e("../driver/xhr");function o(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}s(o,i),o.enabled=i.enabled,t.exports=o},{"../driver/xhr":17,inherits:54}],38:[function(e,t,n){"use strict";var s=e("../utils/event"),i=e("../utils/url"),o=e("inherits"),r=e("events").EventEmitter,a=e("./driver/websocket"),c=function(){};function l(e,t,n){if(!l.enabled())throw new Error("Transport created when disabled");r.call(this),c("constructor",e);var o=this,u=i.addPath(e,"/websocket");u="https"===u.slice(0,5)?"wss"+u.slice(5):"ws"+u.slice(4),this.url=u,this.ws=new a(this.url,[],n),this.ws.onmessage=function(e){c("message event",e.data),o.emit("message",e.data)},this.unloadRef=s.unloadAdd((function(){c("unload"),o.ws.close()})),this.ws.onclose=function(e){c("close event",e.code,e.reason),o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){c("error event",e),o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(l,r),l.prototype.send=function(e){var t="["+e+"]";c("send",t),this.ws.send(t)},l.prototype.close=function(){c("close");var e=this.ws;this._cleanup(),e&&e.close()},l.prototype._cleanup=function(){c("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),s.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},l.enabled=function(){return c("enabled"),!!a},l.transportName="websocket",l.roundTrips=2,t.exports=l},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:void 0,events:3,inherits:54}],39:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./lib/ajax-based"),o=e("./xdr-streaming"),r=e("./receiver/xhr"),a=e("./sender/xdr");function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",r,a)}s(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,t.exports=c},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./lib/ajax-based"),o=e("./receiver/xhr"),r=e("./sender/xdr");function a(e){if(!r.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,r)}s(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&r.enabled&&e.sameScheme},a.transportName="xdr-streaming",a.roundTrips=2,t.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(e,t,n){"use strict";var s=e("inherits"),i=e("./lib/ajax-based"),o=e("./receiver/xhr"),r=e("./sender/xhr-cors"),a=e("./sender/xhr-local");function c(e){if(!a.enabled&&!r.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,r)}s(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||r.enabled)},c.transportName="xhr-polling",c.roundTrips=2,t.exports=c},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(e,t,s){(function(n){(function(){"use strict";var s=e("inherits"),i=e("./lib/ajax-based"),o=e("./receiver/xhr"),r=e("./sender/xhr-cors"),a=e("./sender/xhr-local"),c=e("../utils/browser");function l(e){if(!a.enabled&&!r.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,r)}s(l,i),l.enabled=function(e){return!e.nullOrigin&&!c.isOpera()&&r.enabled},l.transportName="xhr-streaming",l.roundTrips=2,l.needBody=!!n.document,t.exports=l}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],43:[function(e,t,s){(function(e){(function(){"use strict";e.crypto&&e.crypto.getRandomValues?t.exports.randomBytes=function(t){var n=new Uint8Array(t);return e.crypto.getRandomValues(n),n}:t.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,s){(function(e){(function(){"use strict";t.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(e){return!1}}}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){"use strict";var s,i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;t.exports={quote:function(e){var t=JSON.stringify(e);return i.lastIndex=0,i.test(t)?(s=s||function(e){var t,n={},s=[];for(t=0;t<65536;t++)s.push(String.fromCharCode(t));return e.lastIndex=0,s.join("").replace(e,(function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,n}(i),t.replace(i,(function(e){return s[e]}))):t}}},{}],46:[function(e,t,s){(function(n){(function(){"use strict";var s=e("./random"),i={},o=!1,r=n.chrome&&n.chrome.app&&n.chrome.app.runtime;t.exports={attachEvent:function(e,t){void 0!==n.addEventListener?n.addEventListener(e,t,!1):n.document&&n.attachEvent&&(n.document.attachEvent("on"+e,t),n.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==n.addEventListener?n.removeEventListener(e,t,!1):n.document&&n.detachEvent&&(n.document.detachEvent("on"+e,t),n.detachEvent("on"+e,t))},unloadAdd:function(e){if(r)return null;var t=s.string(8);return i[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}},r||t.exports.attachEvent("unload",(function(){o||(o=!0,t.exports.triggerUnloadCallbacks())}))}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(e,t,s){(function(n){(function(){"use strict";var s=e("./event"),i=e("./browser"),o=function(){};t.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in n||(n[t.exports.WPrefix]={})},postMessage:function(e,s){n.parent!==n?n.parent.postMessage(JSON.stringify({windowId:t.exports.currentWindowId,type:e,data:s||""}),"*"):o("Cannot postMessage, no parent window.",e,s)},createIframe:function(e,t){function i(){o("unattach"),clearTimeout(c);try{u.onload=null}catch(e){}u.onerror=null}function r(){o("cleanup"),u&&(i(),setTimeout((function(){u&&u.parentNode.removeChild(u),u=null}),0),s.unloadDel(l))}function a(e){o("onerror",e),u&&(r(),t(e))}var c,l,u=n.document.createElement("iframe");return u.src=e,u.style.display="none",u.style.position="absolute",u.onerror=function(){a("onerror")},u.onload=function(){o("onload"),clearTimeout(c),c=setTimeout((function(){a("onload timeout")}),2e3)},n.document.body.appendChild(u),c=setTimeout((function(){a("timeout")}),15e3),l=s.unloadAdd(r),{post:function(e,t){o("post",e,t),setTimeout((function(){try{u&&u.contentWindow&&u.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:r,loaded:i}},createHtmlfile:function(e,i){function r(){clearTimeout(l),h.onerror=null}function a(){p&&(r(),s.unloadDel(u),h.parentNode.removeChild(h),h=p=null,CollectGarbage())}function c(e){o("onerror",e),p&&(a(),i(e))}var l,u,h,d=["Active"].concat("Object").join("X"),p=new n[d]("htmlfile");p.open(),p.write('<html><script>document.domain="'+n.document.domain+'";<\/script></html>'),p.close(),p.parentWindow[t.exports.WPrefix]=n[t.exports.WPrefix];var f=p.createElement("div");return p.body.appendChild(f),h=p.createElement("iframe"),f.appendChild(h),h.src=e,h.onerror=function(){c("onerror")},l=setTimeout((function(){c("timeout")}),15e3),u=s.unloadAdd(a),{post:function(e,t){try{setTimeout((function(){h&&h.contentWindow&&h.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:a,loaded:r}}},t.exports.iframeEnabled=!1,n.document&&(t.exports.iframeEnabled=("function"==typeof n.postMessage||"object"==typeof n.postMessage)&&!i.isKonqueror())}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:void 0}],48:[function(e,t,s){(function(e){(function(){"use strict";var n={};["log","debug","warn"].forEach((function(t){var s;try{s=e.console&&e.console[t]&&e.console[t].apply}catch(t){}n[t]=s?function(){return e.console[t].apply(e.console,arguments)}:"log"===t?function(){}:n.log})),t.exports=n}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){"use strict";t.exports={isObject:function(e){var t=typeof e;return"function"==t||"object"==t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,s=1,i=arguments.length;s<i;s++)for(n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},{}],50:[function(e,t,n){"use strict";var s=e("crypto"),i="abcdefghijklmnopqrstuvwxyz012345";t.exports={string:function(e){for(var t=i.length,n=s.randomBytes(e),o=[],r=0;r<e;r++)o.push(i.substr(n[r]%t,1));return o.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,n){"use strict";var s=function(){};t.exports=function(e){return{filterToEnabled:function(t,n){var i={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"!==e.transportName||!1!==n.websocket?t.length&&-1===t.indexOf(e.transportName)?s("not in whitelist",e.transportName):e.enabled(n)?(s("enabled",e.transportName),i.main.push(e),e.facadeTransport&&i.facade.push(e.facadeTransport)):s("disabled",e.transportName):s("disabled from server","websocket"))})),i}}}},{debug:void 0}],52:[function(e,t,n){"use strict";var s=e("url-parse"),i=function(){};t.exports={getOrigin:function(e){if(!e)return null;var t=new s(e);if("file:"===t.protocol)return null;var n=t.port;return n=n||("https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return i("same",e,t,n),n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},{debug:void 0,"url-parse":57}],53:[function(e,t,n){t.exports="1.6.1"},{}],54:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],55:[function(e,t,n){"use strict";var s=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}n.stringify=function(e,t){t=t||"";var n,i,o=[];for(i in"string"!=typeof t&&(t="?"),e)if(s.call(e,i)){if((n=e[i])||null!=n&&!isNaN(n)||(n=""),i=encodeURIComponent(i),n=encodeURIComponent(n),null===i||null===n)continue;o.push(i+"="+n)}return o.length?t+o.join("&"):""},n.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,s={};t=n.exec(e);){var o=i(t[1]),r=i(t[2]);null===o||null===r||o in s||(s[o]=r)}return s}},{}],56:[function(e,t,n){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],57:[function(e,t,s){(function(n){(function(){"use strict";var s=e("requires-port"),i=e("querystringify"),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function h(e){return(e||"").toString().replace(o,"")}var d=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,s=("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||s);if("blob:"===e.protocol)i=new b(unescape(e.pathname),{});else if("string"==o)for(t in i=new b(e,{}),p)delete i[t];else if("object"==o){for(t in e)t in p||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=h(e)).replace(r,""),t=t||{};var n,s=l.exec(e),i=s[1]?s[1].toLowerCase():"",o=!!s[2],a=!!s[3],c=0;return o?c=a?(n=s[2]+s[3]+s[4],s[2].length+s[3].length):(n=s[2]+s[4],s[2].length):a?(n=s[3]+s[4],c=s[3].length):n=s[4],"file:"===i?2<=c&&(n=n.slice(2)):m(i)?n=s[4]:i?o&&(n=n.slice(2)):2<=c&&m(t.protocol)&&(n=s[4]),{protocol:i,slashes:o||m(i),slashesCount:c,rest:n}}function b(e,t,n){if(e=(e=h(e)).replace(r,""),!(this instanceof b))return new b(e,t,n);var o,a,c,l,p,v,y=d.slice(),_=typeof t,w=this,x=0;for("object"!=_&&"string"!=_&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=g(e||"",t=f(t))).protocol&&!a.slashes,w.slashes=a.slashes||o&&t.slashes,w.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(w.protocol)))&&(y[3]=[/(.*)/,"pathname"]);x<y.length;x++)"function"!=typeof(l=y[x])?(c=l[0],v=l[1],c!=c?w[v]=e:"string"==typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&(e="number"==typeof l[2]?(w[v]=e.slice(0,p),e.slice(p+l[2])):(w[v]=e.slice(p),e.slice(0,p))):(p=c.exec(e))&&(w[v]=p[1],e=e.slice(0,p.index)),w[v]=w[v]||o&&l[3]&&t[v]||"",l[4]&&(w[v]=w[v].toLowerCase())):e=l(e,w);n&&(w.query=n(w.query)),o&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),s=n.length,i=n[s-1],o=!1,r=0;s--;)"."===n[s]?n.splice(s,1):".."===n[s]?(n.splice(s,1),r++):r&&(0===s&&(o=!0),n.splice(s,1),r--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&m(w.protocol)&&(w.pathname="/"+w.pathname),s(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(p=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,p),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(p+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&m(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}b.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,s(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var r="pathname"===e?"/":"#";o[e]=t.charAt(0)!==r?r+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<d.length;l++){var u=d[l];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,s=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var r=o+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(r+=n.username,n.password&&(r+=":"+n.password),r+="@"):n.password?(r+=":"+n.password,r+="@"):"file:"!==n.protocol&&m(n.protocol)&&!s&&"/"!==n.pathname&&(r+="@"),(":"===s[s.length-1]||c.test(n.hostname)&&!n.port)&&(s+=":"),r+=s+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}},b.extractProtocol=g,b.location=f,b.trimLeft=h,b.qs=i,t.exports=b}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:55,"requires-port":56}]},{},[1])(1)}))},1767:function(e){"use strict";e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},2106:function(e,t,n){"use strict";var s=n(283),i=n(4913);e.exports=function(e,t,n){return n.get&&s(n.get,t,{getter:!0}),n.set&&s(n.set,t,{setter:!0}),i.f(e,t,n)}},2140:function(e,t,n){"use strict";var s=n(8227),i=s("toStringTag"),o={};o[i]="z",e.exports="[object z]"===String(o)},2211:function(e,t,n){"use strict";var s=n(9039);e.exports=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},2360:function(e,t,n){"use strict";var s,i=n(8551),o=n(6801),r=n(8727),a=n(421),c=n(397),l=n(4055),u=n(6119),h=">",d="<",p="prototype",f="script",m=u("IE_PROTO"),g=function(){},b=function(e){return d+f+h+e+d+"/"+f+h},v=function(e){e.write(b("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe"),n="java"+f+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(b("document.F=Object")),e.close(),e.F},_=function(){try{s=new ActiveXObject("htmlfile")}catch(t){}_="undefined"!=typeof document?document.domain&&s?v(s):y():v(s);var e=r.length;while(e--)delete _[p][r[e]];return _()};a[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(g[p]=i(e),n=new g,g[p]=null,n[m]=e):n=_(),void 0===t?n:o.f(n,t)}},2652:function(e,t,n){"use strict";var s=n(6080),i=n(9565),o=n(8551),r=n(6823),a=n(4209),c=n(6198),l=n(1625),u=n(81),h=n(851),d=n(9539),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,n){var g,b,v,y,_,w,x,S=n&&n.that,C=!(!n||!n.AS_ENTRIES),T=!(!n||!n.IS_RECORD),k=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),O=s(t,S),I=function(e){return g&&d(g,"normal",e),new f(!0,e)},N=function(e){return C?(o(e),E?O(e[0],e[1],I):O(e[0],e[1])):E?O(e,I):O(e)};if(T)g=e.iterator;else if(k)g=e;else{if(b=h(e),!b)throw new p(r(e)+" is not iterable");if(a(b)){for(v=0,y=c(e);y>v;v++)if(_=N(e[v]),_&&l(m,_))return _;return new f(!1)}g=u(e,b)}w=T?e.next:g.next;while(!(x=i(w,g)).done){try{_=N(x.value)}catch(R){d(g,"throw",R)}if("object"==typeof _&&_&&l(m,_))return _}return new f(!1)}},2787:function(e,t,n){"use strict";var s=n(9297),i=n(4901),o=n(8981),r=n(6119),a=n(2211),c=r("IE_PROTO"),l=Object,u=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=o(e);if(s(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof l?u:null}},4209:function(e,t,n){"use strict";var s=n(8227),i=n(6269),o=s("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||r[o]===e)}},4659:function(e,t,n){"use strict";var s=n(3724),i=n(4913),o=n(6980);e.exports=function(e,t,n){s?i.f(e,t,o(0,n)):e[t]=n}},6080:function(e,t,n){"use strict";var s=n(7476),i=n(9306),o=n(616),r=s(s.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?r(e,t):function(){return e.apply(t,arguments)}}},6269:function(e){"use strict";e.exports={}},6801:function(e,t,n){"use strict";var s=n(3724),i=n(8686),o=n(4913),r=n(8551),a=n(5397),c=n(1072);t.f=s&&!i?Object.defineProperties:function(e,t){r(e);var n,s=a(t),i=c(t),l=i.length,u=0;while(l>u)o.f(e,n=i[u++],s[n]);return e}},6955:function(e,t,n){"use strict";var s=n(2140),i=n(4901),o=n(2195),r=n(8227),a=r("toStringTag"),c=Object,l="Arguments"===o(function(){return arguments}()),u=function(e,t){try{return e[t]}catch(n){}};e.exports=s?o:function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=u(t=c(e),a))?n:l?o(t):"Object"===(s=o(t))&&i(t.callee)?"Arguments":s}},7476:function(e,t,n){"use strict";var s=n(2195),i=n(9504);e.exports=function(e){if("Function"===s(e))return i(e)}},7588:function(e,t,n){"use strict";var s=n(6518),i=n(2652),o=n(9306),r=n(8551),a=n(1767);s({target:"Iterator",proto:!0,real:!0},{forEach:function(e){r(this),o(e);var t=a(this),n=0;i(t,(function(t){e(t,n++)}),{IS_RECORD:!0})}})},7657:function(e,t,n){"use strict";var s,i,o,r=n(9039),a=n(4901),c=n(34),l=n(2360),u=n(2787),h=n(6840),d=n(8227),p=n(6395),f=d("iterator"),m=!1;[].keys&&(o=[].keys(),"next"in o?(i=u(u(o)),i!==Object.prototype&&(s=i)):m=!0);var g=!c(s)||r((function(){var e={};return s[f].call(e)!==e}));g?s={}:p&&(s=l(s)),a(s[f])||h(s,f,(function(){return this})),e.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:m}},8111:function(e,t,n){"use strict";var s=n(6518),i=n(4576),o=n(679),r=n(8551),a=n(4901),c=n(2787),l=n(2106),u=n(4659),h=n(9039),d=n(9297),p=n(8227),f=n(7657).IteratorPrototype,m=n(3724),g=n(6395),b="constructor",v="Iterator",y=p("toStringTag"),_=TypeError,w=i[v],x=g||!a(w)||w.prototype!==f||!h((function(){w({})})),S=function(){if(o(this,f),c(this)===f)throw new _("Abstract class Iterator not directly constructable")},C=function(e,t){m?l(f,e,{configurable:!0,get:function(){return t},set:function(t){if(r(this),this===f)throw new _("You can't redefine this property");d(this,e)?this[e]=t:u(this,e,t)}}):f[e]=t};d(f,y)||C(y,v),!x&&d(f,b)&&f[b]!==Object||C(b,S),S.prototype=f,s({global:!0,constructor:!0,forced:x},{Iterator:S})},9539:function(e,t,n){"use strict";var s=n(9565),i=n(8551),o=n(5966);e.exports=function(e,t,n){var r,a;i(e);try{if(r=o(e,"return"),!r){if("throw"===t)throw n;return n}r=s(r,e)}catch(c){a=!0,r=c}if("throw"===t)throw n;if(a)throw r;return i(r),n}}}]);
//# sourceMappingURL=11.dee70cbb.js.map