(function(){"use strict";var e={728:function(e,t,n){var o=n(5471),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-header",{staticClass:"app-header",attrs:{height:"60px"}},[t("el-row",{staticStyle:{height:"100%"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",{staticClass:"header-left",attrs:{span:8}},[t("router-link",{staticClass:"brand-link",attrs:{to:"/"}},[e._v("启明隅 "),t("span",{staticClass:"subtitle"},[e._v("学生端")])])],1),t("el-col",{staticClass:"header-center",attrs:{span:8}},[t("el-menu",{staticClass:"header-menu",attrs:{mode:"horizontal",router:"","default-active":e.activeRoute,"background-color":"transparent","text-color":"#303133","active-text-color":"#409EFF"}},[t("el-menu-item",{attrs:{index:"/home",title:"首页"}},[t("i",{staticClass:"el-icon-s-home"}),e._v(" 主页")]),t("el-menu-item",{attrs:{index:"/resources",title:"在线资源"}},[t("i",{staticClass:"el-icon-reading"}),e._v(" 资源")]),t("el-menu-item",{attrs:{index:"/consultation",title:"在线咨询"}},[t("i",{staticClass:"el-icon-chat-line-round"}),e._v(" 咨询")]),t("el-menu-item",{attrs:{index:"/ai-assistant",title:"AI 助手"}},[t("i",{staticClass:"el-icon-cpu"}),e._v(" AI助手")])],1)],1),t("el-col",{staticClass:"header-right",attrs:{span:8}},[e.currentUser?t("div",{staticClass:"user-dropdown"},[t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[t("el-avatar",{staticClass:"user-avatar",attrs:{size:"small",src:e.currentUser.avatar||e.defaultAvatar}}),t("span",{staticClass:"user-name"},[e._v(e._s(e.currentUser.realName||e.currentUser.username))]),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"profile"}},[t("i",{staticClass:"el-icon-user"}),e._v(" 个人资料")]),t("el-dropdown-item",{attrs:{command:"logout",divided:""}},[t("i",{staticClass:"el-icon-switch-button"}),e._v(" 退出登录")])],1)],1)],1):t("div",{staticClass:"auth-buttons"},[t("el-button",{attrs:{type:"primary"},on:{click:e.redirectToLogin}},[e._v("登录")])],1)])],1)],1),t("el-main",{staticClass:"app-main"},[t("router-view")],1),e.snackbar.show?t("el-alert",{staticClass:"global-snackbar",attrs:{title:e.snackbar.text,type:e.snackbar.color||"info",center:"","show-icon":""},on:{close:e.closeSnackbar}}):e._e()],1)},a=[],s=(n(4114),n(5353)),i={name:"App",data(){return{defaultAvatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",currentUser:null}},computed:{...(0,s.aH)(["snackbar"]),activeRoute(){return this.$route.path.startsWith("/resources")?"/resources":this.$route.path.startsWith("/consultation")?"/consultation":this.$route.path.startsWith("/ai-assistant")?"/ai-assistant":this.$route.path.startsWith("/profile")?"/profile":this.$route.path}},methods:{...(0,s.i0)(["closeSnackbar"]),handleCommand(e){"logout"===e?this.logout():"profile"===e&&this.$router&&this.$router.push("/profile")},logout(){localStorage.removeItem("currentUser"),localStorage.removeItem("auth_token"),this.currentUser=null,window.location.href="/"},redirectToLogin(){window.location.href="login.html"},checkAuthStatus(){const e=localStorage.getItem("currentUser"),t=localStorage.getItem("auth_token")||localStorage.getItem("studentToken");if(e&&t)try{this.currentUser=JSON.parse(e)}catch(n){localStorage.removeItem("currentUser"),this.currentUser=null}else this.currentUser=null}},created(){this.checkAuthStatus()},mounted(){this.checkAuthStatus()},watch:{$route(){this.checkAuthStatus()}}},c=i,u=n(1656),l=(0,u.A)(c,r,a,!1,null,"18a47382",null),d=l.exports,m=n(173);const f=()=>n.e(196).then(n.bind(n,9196)),h=()=>n.e(560).then(n.bind(n,4560)),p=()=>n.e(605).then(n.bind(n,1605)),g=()=>n.e(11).then(n.bind(n,1011)),S=()=>n.e(942).then(n.bind(n,942)),v=()=>n.e(826).then(n.bind(n,3826)),b=()=>n.e(475).then(n.bind(n,6475));o["default"].use(m.Ay);const T=[{path:"/register",name:"Register",component:f},{path:"/home",name:"StudentHome",component:h},{path:"/",redirect:"/home"},{path:"/resources",name:"OnlineResources",component:p},{path:"/consultation",name:"OnlineConsultation",component:g},{path:"/consultation/teacher/:teacherId",name:"TeacherProfile",component:S,props:!0},{path:"/ai-assistant",name:"AIAssistant",component:v},{path:"/profile",name:"Profile",component:b},{path:"*",redirect:"/home"}],_=new m.Ay({mode:"history",base:"/",routes:T});var I=_,k=n(2505),y=n.n(k);o["default"].use(s.Ay);var A=new s.Ay.Store({state:{isLoggedIn:!!localStorage.getItem("studentToken"),studentToken:localStorage.getItem("studentToken")||null,studentInfo:JSON.parse(localStorage.getItem("studentInfo"))||{},snackbar:{show:!1,text:"",color:"info",timeout:3e3}},mutations:{SET_LOGIN_STATUS(e,t){e.isLoggedIn=t},SET_TOKEN(e,t){e.studentToken=t,t?(localStorage.setItem("studentToken",t),y().defaults.headers.common["Authorization"]=`Bearer ${t}`):(localStorage.removeItem("studentToken"),delete y().defaults.headers.common["Authorization"])},SET_STUDENT_INFO(e,t){e.studentInfo=t||{},t&&Object.keys(t).length>0?localStorage.setItem("studentInfo",JSON.stringify(t)):localStorage.removeItem("studentInfo")},SHOW_SNACKBAR(e,t){e.snackbar.text=t.text,e.snackbar.color=t.color||"info",e.snackbar.timeout=t.timeout||3e3,e.snackbar.show=!0},CLOSE_SNACKBAR(e){e.snackbar.show=!1,e.snackbar.text="",e.snackbar.color="info"}},actions:{login({commit:e},{token:t,studentInfo:n}){e("SET_TOKEN",t),e("SET_STUDENT_INFO",n),e("SET_LOGIN_STATUS",!0)},logout({commit:e}){e("SET_TOKEN",null),e("SET_STUDENT_INFO",null),e("SET_LOGIN_STATUS",!1)},checkAuth({commit:e}){const t=localStorage.getItem("studentToken"),n=localStorage.getItem("studentInfo");if(t&&n){e("SET_LOGIN_STATUS",!0),e("SET_TOKEN",t);try{e("SET_STUDENT_INFO",JSON.parse(n))}catch(o){console.error("Corrupted student info in storage"),e("SET_STUDENT_INFO",null),e("SET_LOGIN_STATUS",!1),e("SET_TOKEN",null)}}else e("SET_LOGIN_STATUS",!1)},updateStudentInfo({commit:e},t){const n=JSON.parse(localStorage.getItem("studentInfo"))||{},o={...n,...t};e("SET_STUDENT_INFO",o)},showSnackbar({commit:e},t){e("SHOW_SNACKBAR",t)},closeSnackbar({commit:e}){e("CLOSE_SNACKBAR")}},getters:{isLoggedIn:e=>e.isLoggedIn,studentInfo:e=>e.studentInfo,studentName:e=>e.studentInfo?.name,studentAvatar:e=>e.studentInfo?.avatar}}),w=n(1052),C=n.n(w);const O="token",E="user",N="auth_token",U="currentUser",x=()=>{localStorage.removeItem(O),localStorage.removeItem(E),localStorage.removeItem(N),localStorage.removeItem(U)},L=()=>localStorage.getItem(N)||localStorage.getItem(O),j=e=>{e.interceptors.request.use((e=>{const t=L();return t&&(e.headers["Authorization"]=`Bearer ${t}`),e}),(e=>Promise.reject(e))),e.interceptors.response.use((e=>e),(e=>(!e.response||401!==e.response.status&&403!==e.response.status||(x(),window.location.href="/login.html"),Promise.reject(e))))};o["default"].config.productionTip=!1,o["default"].use(C());const P=y().create({baseURL:"/api"});j(P),P.interceptors.request.use((e=>(console.log("API 请求:",e.method,e.url,e.params||e.data),e))),P.interceptors.response.use((e=>(console.log("API 响应成功:",e.config.url,e.status),e)),(e=>(console.error("API 响应错误:",e.config?.url,e.response?.status,e.message),Promise.reject(e)))),o["default"].prototype.$http=P;const $=localStorage.getItem("studentToken");$&&(P.defaults.headers.common["Authorization"]=`Bearer ${$}`),new o["default"]({router:I,store:A,render:e=>e(d)}).$mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,o,r,a){if(!o){var s=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],a=e[l][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,a<s&&(s=a));if(i){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[o,r,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{11:"dee70cbb",196:"e1840d84",475:"83bc1f26",560:"cf04f9be",605:"67f50292",826:"c7f15e8d",942:"810e6d26"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{11:"5bfd414c",196:"d642ed05",475:"abaa564e",560:"dc0fe323",605:"051c00e8",826:"ceda934f",942:"60394ad5"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="qimingyu-student-app:";n.l=function(o,r,a,s){if(e[o])e[o].push(r);else{var i,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+a){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+a),i.src=o),e[o]=[r];var m=function(t,n){i.onerror=i.onload=null,clearTimeout(f);var r=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,r,a){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",n.nc&&(s.nonce=n.nc);var i=function(n){if(s.onerror=s.onload=null,"load"===n.type)r();else{var o=n&&n.type,i=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=i,s.parentNode&&s.parentNode.removeChild(s),a(c)}};return s.onerror=s.onload=i,s.href=t,o?o.parentNode.insertBefore(s,o.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],a=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(a===e||a===t))return r}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){r=s[o],a=r.getAttribute("data-href");if(a===e||a===t)return r}},o=function(o){return new Promise((function(r,a){var s=n.miniCssF(o),i=n.p+s;if(t(s,i))return r();e(o,i,null,r,a)}))},r={524:0};n.f.miniCss=function(e,t){var n={11:1,196:1,475:1,560:1,605:1,826:1,942:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var a=new Promise((function(n,o){r=e[t]=[n,o]}));o.push(r[2]=a);var s=n.p+n.u(t),i=new Error,c=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",i.name="ChunkLoadError",i.type=a,i.request=s,r[1](i)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,a,s=o[0],i=o[1],c=o[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(c)var l=c(n)}for(t&&t(o);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(l)},o=self["webpackChunkqimingyu_student_app"]=self["webpackChunkqimingyu_student_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(728)}));o=n.O(o)})();
//# sourceMappingURL=app.e38b4f11.js.map