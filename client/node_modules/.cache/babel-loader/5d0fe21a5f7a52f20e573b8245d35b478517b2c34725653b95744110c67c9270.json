{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\nimport Home from '../views/Home.vue';\nimport AiAssistant from '../views/student/AiAssistant.vue';\nimport AiChatPage from '../views/student/AiChatPage.vue';\nimport ConsultationDetail from '../views/student/ConsultationDetail.vue';\nimport ConsultationFeedback from '../views/student/ConsultationFeedback.vue';\nimport ConsultationRoom from '../views/student/ConsultationRoom.vue';\nimport ConsultationList from '../views/student/ConsultationList.vue';\nimport { getCurrentUser } from '../services/authService';\n\n// 保护路由的导航守卫\nconst requireAuth = (to, from, next) => {\n  const currentUser = getCurrentUser();\n  if (!currentUser) {\n    next('/login');\n  } else if (to.meta.role && currentUser.role !== to.meta.role) {\n    next('/');\n  } else {\n    next();\n  }\n};\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  component: Home\n}, {\n  path: '/student/ai',\n  name: 'AiAssistant',\n  component: AiAssistant,\n  beforeEnter: requireAuth,\n  meta: {\n    role: 'student'\n  }\n}, {\n  path: '/student/ai/new',\n  name: 'NewAiChat',\n  component: AiChatPage,\n  beforeEnter: requireAuth,\n  meta: {\n    role: 'student'\n  }\n}, {\n  path: '/student/ai/chat/:id',\n  name: 'AiChat',\n  component: AiChatPage,\n  beforeEnter: requireAuth,\n  meta: {\n    role: 'student'\n  }\n}, {\n  path: '/student/consultations',\n  name: 'Consultations',\n  component: ConsultationList,\n  beforeEnter: requireAuth,\n  meta: {\n    role: 'student'\n  }\n}, {\n  path: '/student/consultation/detail/:id',\n  name: 'ConsultationDetail',\n  component: ConsultationDetail,\n  beforeEnter: requireAuth,\n  meta: {\n    role: 'student'\n  }\n}, {\n  path: '/student/consultation/feedback/:id',\n  name: 'ConsultationFeedback',\n  component: ConsultationFeedback,\n  beforeEnter: requireAuth,\n  meta: {\n    role: 'student'\n  }\n}, {\n  path: '/student/consultation/room/:id',\n  name: 'ConsultationRoom',\n  component: ConsultationRoom,\n  beforeEnter: requireAuth,\n  meta: {\n    role: 'student'\n  }\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Home","AiAssistant","AiChatPage","ConsultationDetail","ConsultationFeedback","ConsultationRoom","ConsultationList","getCurrentUser","requireAuth","to","from","next","currentUser","meta","role","routes","path","name","component","beforeEnter","router","history"],"sources":["D:/Code/coding/edu-platform/client/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\nimport AiAssistant from '../views/student/AiAssistant.vue'\r\nimport AiChatPage from '../views/student/AiChatPage.vue'\r\nimport ConsultationDetail from '../views/student/ConsultationDetail.vue'\r\nimport ConsultationFeedback from '../views/student/ConsultationFeedback.vue'\r\nimport ConsultationRoom from '../views/student/ConsultationRoom.vue'\r\nimport ConsultationList from '../views/student/ConsultationList.vue'\r\nimport { getCurrentUser } from '../services/authService'\r\n\r\n// 保护路由的导航守卫\r\nconst requireAuth = (to, from, next) => {\r\n    const currentUser = getCurrentUser()\r\n    if (!currentUser) {\r\n        next('/login')\r\n    } else if (to.meta.role && currentUser.role !== to.meta.role) {\r\n        next('/')\r\n    } else {\r\n        next()\r\n    }\r\n}\r\n\r\nconst routes = [\r\n    {\r\n        path: '/',\r\n        name: 'Home',\r\n        component: Home\r\n    },\r\n    {\r\n        path: '/student/ai',\r\n        name: 'AiAssistant',\r\n        component: AiAssistant,\r\n        beforeEnter: requireAuth,\r\n        meta: { role: 'student' }\r\n    },\r\n    {\r\n        path: '/student/ai/new',\r\n        name: 'NewAiChat',\r\n        component: AiChatPage,\r\n        beforeEnter: requireAuth,\r\n        meta: { role: 'student' }\r\n    },\r\n    {\r\n        path: '/student/ai/chat/:id',\r\n        name: 'AiChat',\r\n        component: AiChatPage,\r\n        beforeEnter: requireAuth,\r\n        meta: { role: 'student' }\r\n    },\r\n    {\r\n        path: '/student/consultations',\r\n        name: 'Consultations',\r\n        component: ConsultationList,\r\n        beforeEnter: requireAuth,\r\n        meta: { role: 'student' }\r\n    },\r\n    {\r\n        path: '/student/consultation/detail/:id',\r\n        name: 'ConsultationDetail',\r\n        component: ConsultationDetail,\r\n        beforeEnter: requireAuth,\r\n        meta: { role: 'student' }\r\n    },\r\n    {\r\n        path: '/student/consultation/feedback/:id',\r\n        name: 'ConsultationFeedback',\r\n        component: ConsultationFeedback,\r\n        beforeEnter: requireAuth,\r\n        meta: { role: 'student' }\r\n    },\r\n    {\r\n        path: '/student/consultation/room/:id',\r\n        name: 'ConsultationRoom',\r\n        component: ConsultationRoom,\r\n        beforeEnter: requireAuth,\r\n        meta: { role: 'student' }\r\n    }\r\n]\r\n\r\nconst router = createRouter({\r\n    history: createWebHistory(),\r\n    routes\r\n})\r\n\r\nexport default router "],"mappings":"AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,WAAW,MAAM,kCAAkC;AAC1D,OAAOC,UAAU,MAAM,iCAAiC;AACxD,OAAOC,kBAAkB,MAAM,yCAAyC;AACxE,OAAOC,oBAAoB,MAAM,2CAA2C;AAC5E,OAAOC,gBAAgB,MAAM,uCAAuC;AACpE,OAAOC,gBAAgB,MAAM,uCAAuC;AACpE,SAASC,cAAc,QAAQ,yBAAyB;;AAExD;AACA,MAAMC,WAAW,GAAGA,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,WAAW,GAAGL,cAAc,CAAC,CAAC;EACpC,IAAI,CAACK,WAAW,EAAE;IACdD,IAAI,CAAC,QAAQ,CAAC;EAClB,CAAC,MAAM,IAAIF,EAAE,CAACI,IAAI,CAACC,IAAI,IAAIF,WAAW,CAACE,IAAI,KAAKL,EAAE,CAACI,IAAI,CAACC,IAAI,EAAE;IAC1DH,IAAI,CAAC,GAAG,CAAC;EACb,CAAC,MAAM;IACHA,IAAI,CAAC,CAAC;EACV;AACJ,CAAC;AAED,MAAMI,MAAM,GAAG,CACX;EACIC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,MAAM;EACZC,SAAS,EAAElB;AACf,CAAC,EACD;EACIgB,IAAI,EAAE,aAAa;EACnBC,IAAI,EAAE,aAAa;EACnBC,SAAS,EAAEjB,WAAW;EACtBkB,WAAW,EAAEX,WAAW;EACxBK,IAAI,EAAE;IAAEC,IAAI,EAAE;EAAU;AAC5B,CAAC,EACD;EACIE,IAAI,EAAE,iBAAiB;EACvBC,IAAI,EAAE,WAAW;EACjBC,SAAS,EAAEhB,UAAU;EACrBiB,WAAW,EAAEX,WAAW;EACxBK,IAAI,EAAE;IAAEC,IAAI,EAAE;EAAU;AAC5B,CAAC,EACD;EACIE,IAAI,EAAE,sBAAsB;EAC5BC,IAAI,EAAE,QAAQ;EACdC,SAAS,EAAEhB,UAAU;EACrBiB,WAAW,EAAEX,WAAW;EACxBK,IAAI,EAAE;IAAEC,IAAI,EAAE;EAAU;AAC5B,CAAC,EACD;EACIE,IAAI,EAAE,wBAAwB;EAC9BC,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEZ,gBAAgB;EAC3Ba,WAAW,EAAEX,WAAW;EACxBK,IAAI,EAAE;IAAEC,IAAI,EAAE;EAAU;AAC5B,CAAC,EACD;EACIE,IAAI,EAAE,kCAAkC;EACxCC,IAAI,EAAE,oBAAoB;EAC1BC,SAAS,EAAEf,kBAAkB;EAC7BgB,WAAW,EAAEX,WAAW;EACxBK,IAAI,EAAE;IAAEC,IAAI,EAAE;EAAU;AAC5B,CAAC,EACD;EACIE,IAAI,EAAE,oCAAoC;EAC1CC,IAAI,EAAE,sBAAsB;EAC5BC,SAAS,EAAEd,oBAAoB;EAC/Be,WAAW,EAAEX,WAAW;EACxBK,IAAI,EAAE;IAAEC,IAAI,EAAE;EAAU;AAC5B,CAAC,EACD;EACIE,IAAI,EAAE,gCAAgC;EACtCC,IAAI,EAAE,kBAAkB;EACxBC,SAAS,EAAEb,gBAAgB;EAC3Bc,WAAW,EAAEX,WAAW;EACxBK,IAAI,EAAE;IAAEC,IAAI,EAAE;EAAU;AAC5B,CAAC,CACJ;AAED,MAAMM,MAAM,GAAGtB,YAAY,CAAC;EACxBuB,OAAO,EAAEtB,gBAAgB,CAAC,CAAC;EAC3BgB;AACJ,CAAC,CAAC;AAEF,eAAeK,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}