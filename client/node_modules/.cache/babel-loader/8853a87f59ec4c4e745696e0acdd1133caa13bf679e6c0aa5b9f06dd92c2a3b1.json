{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"no-chats\"\n};\nconst _hoisted_2 = {\n  key: 1,\n  class: \"ai-chat-history\"\n};\nconst _hoisted_3 = {\n  class: \"history-header\"\n};\nconst _hoisted_4 = {\n  class: \"chat-list\"\n};\nconst _hoisted_5 = {\n  class: \"chat-icon\"\n};\nconst _hoisted_6 = {\n  class: \"chat-info\"\n};\nconst _hoisted_7 = {\n  class: \"chat-title\"\n};\nconst _hoisted_8 = {\n  class: \"chat-meta\"\n};\nconst _hoisted_9 = {\n  class: \"chat-subject\"\n};\nconst _hoisted_10 = {\n  class: \"chat-time\"\n};\nconst _hoisted_11 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return !$props.chats || $props.chats.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[1] || (_cache[1] = _createElementVNode(\"i\", {\n    class: \"fas fa-comment-slash\"\n  }, null, -1 /* HOISTED */)), _cache[2] || (_cache[2] = _createElementVNode(\"p\", null, \"暂无历史会话\", -1 /* HOISTED */)), _createVNode(_component_router_link, {\n    to: \"/student/ai/new\",\n    class: \"new-chat-btn\"\n  }, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createElementVNode(\"i\", {\n      class: \"fas fa-plus\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" 开始新会话 \")])),\n    _: 1 /* STABLE */\n  })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"h3\", null, \"历史会话\", -1 /* HOISTED */)), _createVNode(_component_router_link, {\n    to: \"/student/ai/new\",\n    class: \"new-chat-btn\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createElementVNode(\"i\", {\n      class: \"fas fa-plus\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" 新会话 \")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.chats, chat => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: chat._id,\n      class: _normalizeClass(['chat-item', $setup.currentPath.includes(chat._id) ? 'active' : ''])\n    }, [_createVNode(_component_router_link, {\n      to: `/student/ai/chat/${chat._id}`,\n      class: \"chat-link\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"i\", {\n        class: _normalizeClass($setup.getSubjectIcon(chat.subject))\n      }, null, 2 /* CLASS */)]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, _toDisplayString(chat.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString(chat.subject), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_10, _toDisplayString($setup.formatDate(chat.updatedAt)), 1 /* TEXT */)])])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createElementVNode(\"button\", {\n      class: \"delete-chat-btn\",\n      onClick: $event => $props.onDeleteChat(chat._id),\n      title: \"删除会话\"\n    }, [...(_cache[5] || (_cache[5] = [_createElementVNode(\"i\", {\n      class: \"fas fa-trash-alt\"\n    }, null, -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_11)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]));\n}","map":{"version":3,"names":["key","class","$props","chats","length","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","chat","_id","_normalizeClass","$setup","currentPath","includes","_hoisted_5","getSubjectIcon","subject","_hoisted_6","_hoisted_7","_toDisplayString","title","_hoisted_8","_hoisted_9","_hoisted_10","formatDate","updatedAt","onClick","$event","onDeleteChat","_hoisted_11"],"sources":["D:\\Code\\coding\\edu-platform\\client\\src\\components\\ai\\AIChatHistory.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"!chats || chats.length === 0\" class=\"no-chats\">\r\n    <i class=\"fas fa-comment-slash\"></i>\r\n    <p>暂无历史会话</p>\r\n    <router-link to=\"/student/ai/new\" class=\"new-chat-btn\">\r\n      <i class=\"fas fa-plus\"></i> 开始新会话\r\n    </router-link>\r\n  </div>\r\n  <div v-else class=\"ai-chat-history\">\r\n    <div class=\"history-header\">\r\n      <h3>历史会话</h3>\r\n      <router-link to=\"/student/ai/new\" class=\"new-chat-btn\">\r\n        <i class=\"fas fa-plus\"></i> 新会话\r\n      </router-link>\r\n    </div>\r\n\r\n    <div class=\"chat-list\">\r\n      <div v-for=\"chat in chats\" :key=\"chat._id\" :class=\"['chat-item', currentPath.includes(chat._id) ? 'active' : '']\">\r\n        <router-link :to=\"`/student/ai/chat/${chat._id}`\" class=\"chat-link\">\r\n          <div class=\"chat-icon\">\r\n            <i :class=\"getSubjectIcon(chat.subject)\"></i>\r\n          </div>\r\n          <div class=\"chat-info\">\r\n            <div class=\"chat-title\">{{ chat.title }}</div>\r\n            <div class=\"chat-meta\">\r\n              <span class=\"chat-subject\">{{ chat.subject }}</span>\r\n              <span class=\"chat-time\">{{ formatDate(chat.updatedAt) }}</span>\r\n            </div>\r\n          </div>\r\n        </router-link>\r\n        <button class=\"delete-chat-btn\" @click=\"onDeleteChat(chat._id)\" title=\"删除会话\">\r\n          <i class=\"fas fa-trash-alt\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { formatDistanceToNow } from 'date-fns'\r\nimport { zhCN } from 'date-fns/locale'\r\n\r\nexport default {\r\n  name: 'AIChatHistory',\r\n  props: {\r\n    chats: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    onDeleteChat: {\r\n      type: Function,\r\n      required: true\r\n    }\r\n  },\r\n  setup() {\r\n    const route = useRoute()\r\n\r\n    // 获取当前路径\r\n    const currentPath = computed(() => route.path)\r\n\r\n    // 格式化日期：显示为\"x分钟前\"、\"x小时前\"等\r\n    const formatDate = (dateString) => {\r\n      const date = new Date(dateString)\r\n      return formatDistanceToNow(date, { addSuffix: true, locale: zhCN })\r\n    }\r\n\r\n    // 获取主题图标\r\n    const getSubjectIcon = (subject) => {\r\n      switch (subject) {\r\n        case '数学': return 'fas fa-calculator'\r\n        case '语文': return 'fas fa-book'\r\n        case '英语': return 'fas fa-language'\r\n        case '物理': return 'fas fa-atom'\r\n        case '化学': return 'fas fa-flask'\r\n        case '生物': return 'fas fa-dna'\r\n        case '历史': return 'fas fa-history'\r\n        case '地理': return 'fas fa-globe-asia'\r\n        case '政治': return 'fas fa-balance-scale'\r\n        default: return 'fas fa-brain'\r\n      }\r\n    }\r\n\r\n    return {\r\n      currentPath,\r\n      formatDate,\r\n      getSubjectIcon\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":";;EAAAA,GAAA;EAC2CC,KAAK,EAAC;;;EADjDD,GAAA;EAQcC,KAAK,EAAC;;;EACXA,KAAK,EAAC;AAAgB;;EAOtBA,KAAK,EAAC;AAAW;;EAGXA,KAAK,EAAC;AAAW;;EAGjBA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAY;;EAClBA,KAAK,EAAC;AAAW;;EACdA,KAAK,EAAC;AAAc;;EACpBA,KAAK,EAAC;AAAW;oBA1BrC;;;UACcC,MAAA,CAAAC,KAAK,IAAID,MAAA,CAAAC,KAAK,CAACC,MAAM,U,cAAjCC,mBAAA,CAMM,OANNC,UAMM,G,0BALJC,mBAAA,CAAoC;IAAjCN,KAAK,EAAC;EAAsB,6B,0BAC/BM,mBAAA,CAAa,WAAV,QAAM,sBACTC,YAAA,CAEcC,sBAAA;IAFDC,EAAE,EAAC,iBAAiB;IAACT,KAAK,EAAC;;IAJ5CU,OAAA,EAAAC,QAAA,CAKM,MAA2BC,MAAA,QAAAA,MAAA,OAA3BN,mBAAA,CAA2B;MAAxBN,KAAK,EAAC;IAAa,4BAL5Ba,gBAAA,CAKiC,SAC7B,E;IANJC,CAAA;yBAQEV,mBAAA,CA2BM,OA3BNW,UA2BM,GA1BJT,mBAAA,CAKM,OALNU,UAKM,G,0BAJJV,mBAAA,CAAa,YAAT,MAAI,sBACRC,YAAA,CAEcC,sBAAA;IAFDC,EAAE,EAAC,iBAAiB;IAACT,KAAK,EAAC;;IAX9CU,OAAA,EAAAC,QAAA,CAYQ,MAA2BC,MAAA,QAAAA,MAAA,OAA3BN,mBAAA,CAA2B;MAAxBN,KAAK,EAAC;IAAa,4BAZ9Ba,gBAAA,CAYmC,OAC7B,E;IAbNC,CAAA;QAgBIR,mBAAA,CAkBM,OAlBNW,UAkBM,I,kBAjBJb,mBAAA,CAgBMc,SAAA,QAjCZC,WAAA,CAiB0BlB,MAAA,CAAAC,KAAK,EAAbkB,IAAI;yBAAhBhB,mBAAA,CAgBM;MAhBsBL,GAAG,EAAEqB,IAAI,CAACC,GAAG;MAAGrB,KAAK,EAjBvDsB,eAAA,eAiBuEC,MAAA,CAAAC,WAAW,CAACC,QAAQ,CAACL,IAAI,CAACC,GAAG;QAC5Fd,YAAA,CAWcC,sBAAA;MAXAC,EAAE,sBAAsBW,IAAI,CAACC,GAAG;MAAIrB,KAAK,EAAC;;MAlBhEU,OAAA,EAAAC,QAAA,CAmBU,MAEM,CAFNL,mBAAA,CAEM,OAFNoB,UAEM,GADJpB,mBAAA,CAA6C;QAAzCN,KAAK,EApBrBsB,eAAA,CAoBuBC,MAAA,CAAAI,cAAc,CAACP,IAAI,CAACQ,OAAO;iCAExCtB,mBAAA,CAMM,OANNuB,UAMM,GALJvB,mBAAA,CAA8C,OAA9CwB,UAA8C,EAAAC,gBAAA,CAAnBX,IAAI,CAACY,KAAK,kBACrC1B,mBAAA,CAGM,OAHN2B,UAGM,GAFJ3B,mBAAA,CAAoD,QAApD4B,UAAoD,EAAAH,gBAAA,CAAtBX,IAAI,CAACQ,OAAO,kBAC1CtB,mBAAA,CAA+D,QAA/D6B,WAA+D,EAAAJ,gBAAA,CAApCR,MAAA,CAAAa,UAAU,CAAChB,IAAI,CAACiB,SAAS,kB;MA1BlEvB,CAAA;iDA8BQR,mBAAA,CAES;MAFDN,KAAK,EAAC,iBAAiB;MAAEsC,OAAK,EAAAC,MAAA,IAAEtC,MAAA,CAAAuC,YAAY,CAACpB,IAAI,CAACC,GAAG;MAAGW,KAAK,EAAC;uCACpE1B,mBAAA,CAAgC;MAA7BN,KAAK,EAAC;IAAkB,2B,oBA/BrCyC,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}