{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nexport default {\n  name: 'AIChatHistory',\n  props: {\n    chats: {\n      type: Array,\n      default: () => []\n    },\n    onDeleteChat: {\n      type: Function,\n      required: true\n    }\n  },\n  setup() {\n    const route = useRoute();\n\n    // 获取当前路径\n    const currentPath = computed(() => route.path);\n\n    // 格式化日期：显示为\"x分钟前\"、\"x小时前\"等\n    const formatDate = dateString => {\n      const date = new Date(dateString);\n      return formatDistanceToNow(date, {\n        addSuffix: true,\n        locale: zhCN\n      });\n    };\n\n    // 获取主题图标\n    const getSubjectIcon = subject => {\n      switch (subject) {\n        case '数学':\n          return 'fas fa-calculator';\n        case '语文':\n          return 'fas fa-book';\n        case '英语':\n          return 'fas fa-language';\n        case '物理':\n          return 'fas fa-atom';\n        case '化学':\n          return 'fas fa-flask';\n        case '生物':\n          return 'fas fa-dna';\n        case '历史':\n          return 'fas fa-history';\n        case '地理':\n          return 'fas fa-globe-asia';\n        case '政治':\n          return 'fas fa-balance-scale';\n        default:\n          return 'fas fa-brain';\n      }\n    };\n    return {\n      currentPath,\n      formatDate,\n      getSubjectIcon\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useRoute","formatDistanceToNow","zhCN","name","props","chats","type","Array","default","onDeleteChat","Function","required","setup","route","currentPath","path","formatDate","dateString","date","Date","addSuffix","locale","getSubjectIcon","subject"],"sources":["D:\\Code\\coding\\edu-platform\\client\\src\\components\\ai\\AIChatHistory.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"!chats || chats.length === 0\" class=\"no-chats\">\r\n    <i class=\"fas fa-comment-slash\"></i>\r\n    <p>暂无历史会话</p>\r\n    <router-link to=\"/student/ai/new\" class=\"new-chat-btn\">\r\n      <i class=\"fas fa-plus\"></i> 开始新会话\r\n    </router-link>\r\n  </div>\r\n  <div v-else class=\"ai-chat-history\">\r\n    <div class=\"history-header\">\r\n      <h3>历史会话</h3>\r\n      <router-link to=\"/student/ai/new\" class=\"new-chat-btn\">\r\n        <i class=\"fas fa-plus\"></i> 新会话\r\n      </router-link>\r\n    </div>\r\n    \r\n    <div class=\"chat-list\">\r\n      <div\r\n        v-for=\"chat in chats\"\r\n        :key=\"chat._id\"\r\n        :class=\"['chat-item', currentPath.includes(chat._id) ? 'active' : '']\"\r\n      >\r\n        <router-link :to=\"`/student/ai/chat/${chat._id}`\" class=\"chat-link\">\r\n          <div class=\"chat-icon\">\r\n            <i :class=\"getSubjectIcon(chat.subject)\"></i>\r\n          </div>\r\n          <div class=\"chat-info\">\r\n            <div class=\"chat-title\">{{ chat.title }}</div>\r\n            <div class=\"chat-meta\">\r\n              <span class=\"chat-subject\">{{ chat.subject }}</span>\r\n              <span class=\"chat-time\">{{ formatDate(chat.updatedAt) }}</span>\r\n            </div>\r\n          </div>\r\n        </router-link>\r\n        <button\r\n          class=\"delete-chat-btn\"\r\n          @click=\"onDeleteChat(chat._id)\"\r\n          title=\"删除会话\"\r\n        >\r\n          <i class=\"fas fa-trash-alt\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { formatDistanceToNow } from 'date-fns'\r\nimport { zhCN } from 'date-fns/locale'\r\n\r\nexport default {\r\n  name: 'AIChatHistory',\r\n  props: {\r\n    chats: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    onDeleteChat: {\r\n      type: Function,\r\n      required: true\r\n    }\r\n  },\r\n  setup() {\r\n    const route = useRoute()\r\n    \r\n    // 获取当前路径\r\n    const currentPath = computed(() => route.path)\r\n    \r\n    // 格式化日期：显示为\"x分钟前\"、\"x小时前\"等\r\n    const formatDate = (dateString) => {\r\n      const date = new Date(dateString)\r\n      return formatDistanceToNow(date, { addSuffix: true, locale: zhCN })\r\n    }\r\n    \r\n    // 获取主题图标\r\n    const getSubjectIcon = (subject) => {\r\n      switch (subject) {\r\n        case '数学': return 'fas fa-calculator'\r\n        case '语文': return 'fas fa-book'\r\n        case '英语': return 'fas fa-language'\r\n        case '物理': return 'fas fa-atom'\r\n        case '化学': return 'fas fa-flask'\r\n        case '生物': return 'fas fa-dna'\r\n        case '历史': return 'fas fa-history'\r\n        case '地理': return 'fas fa-globe-asia'\r\n        case '政治': return 'fas fa-balance-scale'\r\n        default: return 'fas fa-brain'\r\n      }\r\n    }\r\n    \r\n    return {\r\n      currentPath,\r\n      formatDate,\r\n      getSubjectIcon\r\n    }\r\n  }\r\n}\r\n</script> "],"mappings":"AA+CA,SAASA,GAAG,EAAEC,QAAO,QAAS,KAAI;AAClC,SAASC,QAAO,QAAS,YAAW;AACpC,SAASC,mBAAkB,QAAS,UAAS;AAC7C,SAASC,IAAG,QAAS,iBAAgB;AAErC,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,KAAK,EAAE;IACLC,KAAK,EAAE;MACLC,IAAI,EAAEC,KAAK;MACXC,OAAO,EAAEA,CAAA,KAAM;IACjB,CAAC;IACDC,YAAY,EAAE;MACZH,IAAI,EAAEI,QAAQ;MACdC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIb,QAAQ,CAAC;;IAEvB;IACA,MAAMc,WAAU,GAAIf,QAAQ,CAAC,MAAMc,KAAK,CAACE,IAAI;;IAE7C;IACA,MAAMC,UAAS,GAAKC,UAAU,IAAK;MACjC,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,UAAU;MAChC,OAAOhB,mBAAmB,CAACiB,IAAI,EAAE;QAAEE,SAAS,EAAE,IAAI;QAAEC,MAAM,EAAEnB;MAAK,CAAC;IACpE;;IAEA;IACA,MAAMoB,cAAa,GAAKC,OAAO,IAAK;MAClC,QAAQA,OAAO;QACb,KAAK,IAAI;UAAE,OAAO,mBAAkB;QACpC,KAAK,IAAI;UAAE,OAAO,aAAY;QAC9B,KAAK,IAAI;UAAE,OAAO,iBAAgB;QAClC,KAAK,IAAI;UAAE,OAAO,aAAY;QAC9B,KAAK,IAAI;UAAE,OAAO,cAAa;QAC/B,KAAK,IAAI;UAAE,OAAO,YAAW;QAC7B,KAAK,IAAI;UAAE,OAAO,gBAAe;QACjC,KAAK,IAAI;UAAE,OAAO,mBAAkB;QACpC,KAAK,IAAI;UAAE,OAAO,sBAAqB;QACvC;UAAS,OAAO,cAAa;MAC/B;IACF;IAEA,OAAO;MACLT,WAAW;MACXE,UAAU;MACVM;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}