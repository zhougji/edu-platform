(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48b903b2"],{"0d26":function(e,t,r){"use strict";var a=r("e330"),s=Error,i=a("".replace),o=function(e){return String(new s(e).stack)}("zxcasd"),n=/\n\s*at [^:]*:[^\n]*/,l=n.test(o);e.exports=function(e,t){if(l&&"string"==typeof e&&!s.prepareStackTrace)while(t--)e=i(e,n,"");return e}},1787:function(e,t,r){"use strict";var a=r("861d");e.exports=function(e){return a(e)||null===e}},"271a":function(e,t,r){"use strict";var a=r("cb2d"),s=r("e330"),i=r("577e"),o=r("d6d6"),n=URLSearchParams,l=n.prototype,c=s(l.getAll),u=s(l.has),p=new n("a=1");!p.has("a",2)&&p.has("a",void 0)||a(l,"has",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return u(this,e);var a=c(this,e);o(t,1);var s=i(r),n=0;while(n<a.length)if(a[n++]===s)return!0;return!1}),{enumerable:!0,unsafe:!0})},"2ba4":function(e,t,r){"use strict";var a=r("40d5"),s=Function.prototype,i=s.apply,o=s.call;e.exports="object"==typeof Reflect&&Reflect.apply||(a?o.bind(i):function(){return o.apply(i,arguments)})},"39f7":function(e,t,r){},"3bbe":function(e,t,r){"use strict";var a=r("1787"),s=String,i=TypeError;e.exports=function(e){if(a(e))return e;throw new i("Can't set "+s(e)+" as a prototype")}},5494:function(e,t,r){"use strict";var a=r("83ab"),s=r("e330"),i=r("edd0"),o=URLSearchParams.prototype,n=s(o.forEach);a&&!("size"in o)&&i(o,"size",{get:function(){var e=0;return n(this,(function(){e++})),e},configurable:!0,enumerable:!0})},"577e":function(e,t,r){"use strict";var a=r("f5df"),s=String;e.exports=function(e){if("Symbol"===a(e))throw new TypeError("Cannot convert a Symbol value to a string");return s(e)}},"58ca":function(e,t,r){"use strict";r("39f7")},"6f19":function(e,t,r){"use strict";var a=r("9112"),s=r("0d26"),i=r("b980"),o=Error.captureStackTrace;e.exports=function(e,t,r,n){i&&(o?o(e,t):a(e,"stack",s(r,n)))}},7156:function(e,t,r){"use strict";var a=r("1626"),s=r("861d"),i=r("d2bb");e.exports=function(e,t,r){var o,n;return i&&a(o=t.constructor)&&o!==r&&s(n=o.prototype)&&n!==r.prototype&&i(e,n),e}},7282:function(e,t,r){"use strict";var a=r("e330"),s=r("59ed");e.exports=function(e,t,r){try{return a(s(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(i){}}},"88a7":function(e,t,r){"use strict";var a=r("cb2d"),s=r("e330"),i=r("577e"),o=r("d6d6"),n=URLSearchParams,l=n.prototype,c=s(l.append),u=s(l["delete"]),p=s(l.forEach),d=s([].push),f=new n("a=1&a=2&b=3");f["delete"]("a",1),f["delete"]("b",void 0),f+""!=="a=2"&&a(l,"delete",(function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&void 0===r)return u(this,e);var a=[];p(this,(function(e,t){d(a,{key:t,value:e})})),o(t,1);var s,n=i(e),l=i(r),f=0,m=0,h=!1,b=a.length;while(f<b)s=a[f++],h||s.key===n?(h=!0,u(this,s.key)):m++;while(m<b)s=a[m++],s.key===n&&s.value===l||c(this,s.key,s.value)}),{enumerable:!0,unsafe:!0})},ab36:function(e,t,r){"use strict";var a=r("861d"),s=r("9112");e.exports=function(e,t){a(t)&&"cause"in t&&s(e,"cause",t.cause)}},aeb0:function(e,t,r){"use strict";var a=r("9bf2").f;e.exports=function(e,t,r){r in e||a(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},b980:function(e,t,r){"use strict";var a=r("d039"),s=r("5c6c");e.exports=!a((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",s(1,7)),7!==e.stack)}))},c66d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"profile-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-card",{staticClass:"profile-card"},[t("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("个人资料")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.editAvatar}},[t("i",{staticClass:"el-icon-edit"}),e._v(" 修改头像 ")])],1),t("div",{staticClass:"profile-avatar-container"},[t("el-avatar",{attrs:{size:120,src:e.profile.avatar||"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}})],1),t("div",{staticClass:"profile-info"},[t("h2",[e._v(e._s(e.profile.realName||"未设置"))]),t("p",[t("i",{staticClass:"el-icon-user"}),e._v(" "+e._s(e.profile.username||"未设置"))]),t("p",[t("i",{staticClass:"el-icon-message"}),e._v(" "+e._s(e.profile.email||"未设置"))]),"verified"===e.profile.verificationStatus?t("el-tag",{attrs:{type:"success"}},[e._v("实名已认证")]):"pending"===e.profile.verificationStatus?t("el-tag",{attrs:{type:"warning"}},[e._v("认证审核中")]):t("el-tag",{attrs:{type:"info"}},[e._v("未认证")])],1),e.profile.subjects&&e.profile.subjects.length?t("div",{staticClass:"profile-subjects"},[t("h3",[e._v("教学学科")]),e._l(e.displaySubjects,(function(r){return t("el-tag",{key:r,staticStyle:{"margin-right":"5px","margin-bottom":"5px"}},[e._v(e._s(r))])}))],2):e._e()])],1),t("el-col",{attrs:{span:16}},[t("el-card",[t("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("编辑个人信息")])]),t("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[t("el-form",{ref:"basicForm",attrs:{model:e.editForm.basic,"label-width":"100px",rules:e.rules.basic}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.editForm.basic.username,callback:function(t){e.$set(e.editForm.basic,"username",t)},expression:"editForm.basic.username"}})],1),t("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[t("el-input",{model:{value:e.editForm.basic.email,callback:function(t){e.$set(e.editForm.basic,"email",t)},expression:"editForm.basic.email"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{model:{value:e.editForm.basic.phone,callback:function(t){e.$set(e.editForm.basic,"phone",t)},expression:"editForm.basic.phone"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading.basic},on:{click:e.updateBasic}},[e._v("保存更改")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"专业信息",name:"professional"}},[t("el-form",{ref:"professionalForm",attrs:{model:e.editForm.professional,"label-width":"100px",rules:e.rules.professional}},[t("el-form-item",{attrs:{label:"教学学科",prop:"subjects"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择教学学科"},model:{value:e.editForm.professional.subjects,callback:function(t){e.$set(e.editForm.professional,"subjects",t)},expression:"editForm.professional.subjects"}},[t("el-option",{attrs:{label:"数学",value:"数学"}}),t("el-option",{attrs:{label:"语文",value:"语文"}}),t("el-option",{attrs:{label:"英语",value:"英语"}}),t("el-option",{attrs:{label:"物理",value:"物理"}}),t("el-option",{attrs:{label:"化学",value:"化学"}}),t("el-option",{attrs:{label:"生物",value:"生物"}}),t("el-option",{attrs:{label:"历史",value:"历史"}}),t("el-option",{attrs:{label:"地理",value:"地理"}}),t("el-option",{attrs:{label:"政治",value:"政治"}}),t("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),t("el-form-item",{attrs:{label:"擅长领域",prop:"specialties"}},[t("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.editForm.professional.specialties,callback:function(t){e.$set(e.editForm.professional,"specialties",t)},expression:"editForm.professional.specialties"}})],1),t("el-form-item",{attrs:{label:"教学经验",prop:"experience"}},[t("el-input-number",{attrs:{min:0,max:50},model:{value:e.editForm.professional.experience,callback:function(t){e.$set(e.editForm.professional,"experience",t)},expression:"editForm.professional.experience"}}),t("span",{staticStyle:{"margin-left":"10px"}},[e._v("年")])],1),t("el-form-item",{attrs:{label:"个人简介",prop:"introduction"}},[t("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入您的个人简介，包括所教学科、特长、教学风格等"},model:{value:e.editForm.professional.introduction,callback:function(t){e.$set(e.editForm.professional,"introduction",t)},expression:"editForm.professional.introduction"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading.professional},on:{click:e.updateProfessional}},[e._v("保存更改")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"安全设置",name:"security"}},[t("el-form",{ref:"securityForm",attrs:{model:e.editForm.security,"label-width":"100px",rules:e.rules.security}},[t("el-form-item",{attrs:{label:"当前密码",prop:"currentPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入当前密码"},model:{value:e.editForm.security.currentPassword,callback:function(t){e.$set(e.editForm.security,"currentPassword",t)},expression:"editForm.security.currentPassword"}})],1),t("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.editForm.security.newPassword,callback:function(t){e.$set(e.editForm.security,"newPassword",t)},expression:"editForm.security.newPassword"}})],1),t("el-form-item",{attrs:{label:"确认新密码",prop:"confirmPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码"},model:{value:e.editForm.security.confirmPassword,callback:function(t){e.$set(e.editForm.security,"confirmPassword",t)},expression:"editForm.security.confirmPassword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading.security},on:{click:e.updatePassword}},[e._v("更新密码")])],1)],1)],1)],1)],1)],1)],1),t("el-dialog",{attrs:{title:"更新头像",visible:e.dialogVisible,width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:3000/api/teachers/avatar",headers:e.uploadHeaders,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"before-upload":e.beforeAvatarUpload}},[e.tempAvatar?t("img",{staticClass:"avatar",attrs:{src:e.tempAvatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.loading.avatar},on:{click:e.saveAvatar}},[e._v("确定")])],1)],1)],1)},s=[],i=(r("d9e2"),r("88a7"),r("271a"),r("5494"),{name:"Profile",data(){const e=(e,t,r)=>{t!==this.editForm.security.newPassword?r(new Error("两次输入的密码不一致")):r()};return{activeTab:"basic",dialogVisible:!1,tempAvatar:"",profile:{username:"",email:"",phone:"",realName:"",subjects:[],specialties:"",experience:0,introduction:"",avatar:"",verificationStatus:""},editForm:{basic:{username:"",email:"",phone:""},professional:{subjects:[],specialties:"",experience:0,introduction:""},security:{currentPassword:"",newPassword:"",confirmPassword:""}},rules:{basic:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]},professional:{subjects:[{required:!0,message:"请至少选择一个教学学科",trigger:"change"}],introduction:[{required:!0,message:"请输入个人简介",trigger:"blur"},{min:50,message:"简介内容至少50个字符",trigger:"blur"}]},security:{currentPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度至少6个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:e,trigger:"blur"}]}},loading:{basic:!1,professional:!1,security:!1,avatar:!1}}},computed:{uploadHeaders(){return{Authorization:"Bearer "+localStorage.getItem("teacherToken")}},displaySubjects(){return this.profile.subjects||[]}},methods:{fetchProfile(){var e;const t=null===(e=JSON.parse(localStorage.getItem("teacherInfo")))||void 0===e?void 0:e.id;t&&this.$axios.get("/teachers/"+t,{headers:{Authorization:"Bearer "+localStorage.getItem("teacherToken")}}).then(e=>{this.profile=e.data,this.editForm.basic={username:this.profile.username||"",email:this.profile.email||"",phone:this.profile.phone||""},this.editForm.professional={subjects:this.profile.subjects||[],specialties:this.profile.specialties||"",experience:this.profile.experience||0,introduction:this.profile.introduction||""}}).catch(e=>{console.error("Error fetching profile:",e),this.$message.error("获取个人资料失败")})},updateBasic(){this.$refs.basicForm.validate(e=>{e&&(this.loading.basic=!0,this.$axios.put("/teachers/profile",this.editForm.basic,{headers:{Authorization:"Bearer "+localStorage.getItem("teacherToken")}}).then(()=>{this.$message.success("基本信息更新成功"),this.fetchProfile()}).catch(e=>{var t,r;console.error("Error updating basic info:",e),this.$message.error((null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"更新失败")}).finally(()=>{this.loading.basic=!1}))})},updateProfessional(){this.$refs.professionalForm.validate(e=>{e&&(this.loading.professional=!0,this.$axios.put("/teachers/professional",this.editForm.professional,{headers:{Authorization:"Bearer "+localStorage.getItem("teacherToken")}}).then(()=>{this.$message.success("专业信息更新成功"),this.fetchProfile()}).catch(e=>{var t,r;console.error("Error updating professional info:",e),this.$message.error((null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"更新失败")}).finally(()=>{this.loading.professional=!1}))})},updatePassword(){this.$refs.securityForm.validate(e=>{e&&(this.loading.security=!0,this.$axios.put("/teachers/password",this.editForm.security,{headers:{Authorization:"Bearer "+localStorage.getItem("teacherToken")}}).then(()=>{this.$message.success("密码更新成功"),this.editForm.security={currentPassword:"",newPassword:"",confirmPassword:""}}).catch(e=>{var t,r;console.error("Error updating password:",e),this.$message.error((null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"更新失败")}).finally(()=>{this.loading.security=!1}))})},editAvatar(){this.dialogVisible=!0,this.tempAvatar=this.profile.avatar},handleAvatarSuccess(e,t){this.tempAvatar=URL.createObjectURL(t.raw)},handleAvatarError(){this.$message.error("头像上传失败")},beforeAvatarUpload(e){const t=0===e.type.indexOf("image/"),r=e.size/1024/1024<2;return t||this.$message.error("上传头像只能是图片格式!"),r||this.$message.error("上传头像大小不能超过 2MB!"),t&&r},saveAvatar(){this.loading.avatar=!0,this.profile.avatar=this.tempAvatar,this.dialogVisible=!1,this.loading.avatar=!1,this.$message.success("头像更新成功")}},created(){this.fetchProfile()}}),o=i,n=(r("58ca"),r("2877")),l=Object(n["a"])(o,a,s,!1,null,"7ca14e0e",null);t["default"]=l.exports},d2bb:function(e,t,r){"use strict";var a=r("7282"),s=r("861d"),i=r("1d80"),o=r("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=a(Object.prototype,"__proto__","set"),e(r,[]),t=r instanceof Array}catch(n){}return function(r,a){return i(r),o(a),s(r)?(t?e(r,a):r.__proto__=a,r):r}}():void 0)},d6d6:function(e,t,r){"use strict";var a=TypeError;e.exports=function(e,t){if(e<t)throw new a("Not enough arguments");return e}},d9e2:function(e,t,r){"use strict";var a=r("23e7"),s=r("cfe9"),i=r("2ba4"),o=r("e5cb"),n="WebAssembly",l=s[n],c=7!==new Error("e",{cause:7}).cause,u=function(e,t){var r={};r[e]=o(e,t,c),a({global:!0,constructor:!0,arity:1,forced:c},r)},p=function(e,t){if(l&&l[e]){var r={};r[e]=o(n+"."+e,t,c),a({target:n,stat:!0,constructor:!0,arity:1,forced:c},r)}};u("Error",(function(e){return function(t){return i(e,this,arguments)}})),u("EvalError",(function(e){return function(t){return i(e,this,arguments)}})),u("RangeError",(function(e){return function(t){return i(e,this,arguments)}})),u("ReferenceError",(function(e){return function(t){return i(e,this,arguments)}})),u("SyntaxError",(function(e){return function(t){return i(e,this,arguments)}})),u("TypeError",(function(e){return function(t){return i(e,this,arguments)}})),u("URIError",(function(e){return function(t){return i(e,this,arguments)}})),p("CompileError",(function(e){return function(t){return i(e,this,arguments)}})),p("LinkError",(function(e){return function(t){return i(e,this,arguments)}})),p("RuntimeError",(function(e){return function(t){return i(e,this,arguments)}}))},e391:function(e,t,r){"use strict";var a=r("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:a(e)}},e5cb:function(e,t,r){"use strict";var a=r("d066"),s=r("1a2d"),i=r("9112"),o=r("3a9b"),n=r("d2bb"),l=r("e893"),c=r("aeb0"),u=r("7156"),p=r("e391"),d=r("ab36"),f=r("6f19"),m=r("83ab"),h=r("c430");e.exports=function(e,t,r,b){var v="stackTraceLimit",g=b?2:1,y=e.split("."),w=y[y.length-1],x=a.apply(null,y);if(x){var F=x.prototype;if(!h&&s(F,"cause")&&delete F.cause,!r)return x;var k=a("Error"),P=t((function(e,t){var r=p(b?t:e,void 0),a=b?new x(e):new x;return void 0!==r&&i(a,"message",r),f(a,P,a.stack,2),this&&o(F,this)&&u(a,this,P),arguments.length>g&&d(a,arguments[g]),a}));if(P.prototype=F,"Error"!==w?n?n(P,k):l(P,k,{name:!0}):m&&v in x&&(c(P,x,v),c(P,x,"prepareStackTrace")),l(P,x),!h)try{F.name!==w&&i(F,"name",w),F.constructor=P}catch(_){}return P}}}}]);
//# sourceMappingURL=chunk-48b903b2.a27dbd85.js.map