{"remainingRequest":"D:\\Code\\coding\\edu-platform\\teacher-app\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\Code\\coding\\edu-platform\\teacher-app\\src\\components\\ResourceManagement.vue?vue&type=style&index=0&id=f9d7febe&scoped=true&lang=css","dependencies":[{"path":"D:\\Code\\coding\\edu-platform\\teacher-app\\src\\components\\ResourceManagement.vue","mtime":1742115049836},{"path":"D:\\Code\\coding\\edu-platform\\teacher-app\\node_modules\\css-loader\\dist\\cjs.js","mtime":1742112399510},{"path":"D:\\Code\\coding\\edu-platform\\teacher-app\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1742112399320},{"path":"D:\\Code\\coding\\edu-platform\\teacher-app\\node_modules\\postcss-loader\\src\\index.js","mtime":1742112399282},{"path":"D:\\Code\\coding\\edu-platform\\teacher-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742112399727},{"path":"D:\\Code\\coding\\edu-platform\\teacher-app\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1742112399313}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoucmVzb3VyY2UtbWFuYWdlbWVudCB7DQogIHBhZGRpbmc6IDIwcHg7DQp9DQoNCi5wYWdlLWhlYWRlciB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgbWFyZ2luLWJvdHRvbTogMjBweDsNCn0NCg0KLmZpbHRlcnMgew0KICBkaXNwbGF5OiBmbGV4Ow0KICBnYXA6IDEwcHg7DQp9DQoNCi5zZWFyY2gtaW5wdXQgew0KICB3aWR0aDogMjAwcHg7DQp9DQoNCi5wYWdpbmF0aW9uLWNvbnRhaW5lciB7DQogIG1hcmdpbi10b3A6IDIwcHg7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KfQ0KDQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQgew0KICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCg0KLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkOmhvdmVyIHsNCiAgYm9yZGVyLWNvbG9yOiAjNDA5RUZGOw0KfQ0KDQouYXZhdGFyLXVwbG9hZGVyLWljb24gew0KICBmb250LXNpemU6IDI4cHg7DQogIGNvbG9yOiAjOGM5MzlkOw0KICB3aWR0aDogMTIwcHg7DQogIGhlaWdodDogMTIwcHg7DQogIGxpbmUtaGVpZ2h0OiAxMjBweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQouYXZhdGFyIHsNCiAgd2lkdGg6IDEyMHB4Ow0KICBoZWlnaHQ6IDEyMHB4Ow0KICBkaXNwbGF5OiBibG9jazsNCn0NCg=="},{"version":3,"sources":["D:\\Code\\coding\\edu-platform\\teacher-app\\src\\components\\ResourceManagement.vue"],"names":[],"mappings":"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","file":"D:/Code/coding/edu-platform/teacher-app/src/components/ResourceManagement.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"resource-management\">\r\n    <div class=\"page-header\">\r\n      <el-button type=\"primary\" @click=\"dialogVisible = true\">上传资源</el-button>\r\n      \r\n      <div class=\"filters\">\r\n        <el-select v-model=\"filters.subject\" placeholder=\"科目\" clearable>\r\n          <el-option\r\n            v-for=\"item in subjectOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n        \r\n        <el-select v-model=\"filters.type\" placeholder=\"类型\" clearable>\r\n          <el-option\r\n            v-for=\"item in typeOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n        \r\n        <el-select v-model=\"filters.level\" placeholder=\"级别\" clearable>\r\n          <el-option\r\n            v-for=\"item in levelOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n        \r\n        <el-input\r\n          placeholder=\"搜索资源\"\r\n          v-model=\"filters.keyword\"\r\n          class=\"search-input\"\r\n          clearable>\r\n          <template #suffix>\r\n            <i class=\"el-icon-search\"></i>\r\n          </template>\r\n        </el-input>\r\n      </div>\r\n    </div>\r\n    \r\n    <el-table\r\n      :data=\"filteredResources\"\r\n      style=\"width: 100%\"\r\n      v-loading=\"loading\">\r\n      <el-table-column\r\n        prop=\"title\"\r\n        label=\"标题\"\r\n        min-width=\"200\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"subject\"\r\n        label=\"科目\"\r\n        width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"type\"\r\n        label=\"类型\"\r\n        width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"level\"\r\n        label=\"级别\"\r\n        width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"uploadDate\"\r\n        label=\"上传时间\"\r\n        width=\"160\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"viewCount\"\r\n        label=\"浏览量\"\r\n        width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"downloadCount\"\r\n        label=\"下载量\"\r\n        width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        fixed=\"right\"\r\n        label=\"操作\"\r\n        width=\"150\">\r\n        <template #default=\"scope\">\r\n          <el-button\r\n            size=\"small\"\r\n            @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n          <el-button\r\n            size=\"small\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pagination.currentPage\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"pagination.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"pagination.total\">\r\n      </el-pagination>\r\n    </div>\r\n    \r\n    <!-- 上传资源对话框 -->\r\n    <el-dialog\r\n      title=\"上传资源\"\r\n      v-model=\"dialogVisible\"\r\n      width=\"50%\">\r\n      <el-form :model=\"resourceForm\" label-width=\"80px\" :rules=\"rules\" ref=\"resourceFormRef\">\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input v-model=\"resourceForm.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" prop=\"description\">\r\n          <el-input type=\"textarea\" v-model=\"resourceForm.description\" rows=\"3\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"科目\" prop=\"subject\">\r\n          <el-select v-model=\"resourceForm.subject\" placeholder=\"请选择科目\">\r\n            <el-option\r\n              v-for=\"item in subjectOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"类型\" prop=\"type\">\r\n          <el-select v-model=\"resourceForm.type\" placeholder=\"请选择资源类型\">\r\n            <el-option\r\n              v-for=\"item in typeOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"级别\" prop=\"level\">\r\n          <el-select v-model=\"resourceForm.level\" placeholder=\"请选择适用级别\">\r\n            <el-option\r\n              v-for=\"item in levelOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"关键词\">\r\n          <el-input v-model=\"resourceForm.keywords\" placeholder=\"多个关键词用逗号分隔\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"文件\" prop=\"file\" v-if=\"resourceForm.type !== 'link'\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            drag\r\n            action=\"http://localhost:5000/api/resources/upload\"\r\n            :headers=\"uploadHeaders\"\r\n            :on-success=\"handleUploadSuccess\"\r\n            :on-error=\"handleUploadError\"\r\n            :before-upload=\"beforeUpload\">\r\n            <i class=\"el-icon-upload\"></i>\r\n            <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n            <template #tip>\r\n              <div class=\"el-upload__tip\">支持各种文档、图片、视频等文件类型，单个文件不超过50MB</div>\r\n            </template>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"外部链接\" v-if=\"resourceForm.type === 'link'\" prop=\"url\">\r\n          <el-input v-model=\"resourceForm.url\" placeholder=\"请输入资源外部链接\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"缩略图\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"http://localhost:5000/api/resources/upload-thumbnail\"\r\n            :headers=\"uploadHeaders\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleThumbnailSuccess\"\r\n            :before-upload=\"beforeThumbnailUpload\">\r\n            <img v-if=\"resourceForm.thumbnail\" :src=\"resourceForm.thumbnail\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm\">确定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    \r\n    <!-- 编辑资源对话框 -->\r\n    <el-dialog\r\n      title=\"编辑资源\"\r\n      v-model=\"editDialogVisible\"\r\n      width=\"50%\">\r\n      <el-form :model=\"editForm\" label-width=\"80px\" :rules=\"rules\" ref=\"editFormRef\">\r\n        <el-form-item label=\"标题\" prop=\"title\">\r\n          <el-input v-model=\"editForm.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" prop=\"description\">\r\n          <el-input type=\"textarea\" v-model=\"editForm.description\" rows=\"3\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"科目\" prop=\"subject\">\r\n          <el-select v-model=\"editForm.subject\" placeholder=\"请选择科目\">\r\n            <el-option\r\n              v-for=\"item in subjectOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"级别\" prop=\"level\">\r\n          <el-select v-model=\"editForm.level\" placeholder=\"请选择适用级别\">\r\n            <el-option\r\n              v-for=\"item in levelOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"关键词\">\r\n          <el-input v-model=\"editForm.keywords\" placeholder=\"多个关键词用逗号分隔\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"editDialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitEditForm\">确定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, computed, onMounted } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'ResourceManagement',\r\n  setup() {\r\n    const resources = ref([])\r\n    const loading = ref(true)\r\n    const dialogVisible = ref(false)\r\n    const editDialogVisible = ref(false)\r\n    const resourceFormRef = ref(null)\r\n    const editFormRef = ref(null)\r\n    \r\n    const subjectOptions = [\r\n      { value: 'math', label: '数学' },\r\n      { value: 'chinese', label: '语文' },\r\n      { value: 'english', label: '英语' },\r\n      { value: 'physics', label: '物理' },\r\n      { value: 'chemistry', label: '化学' },\r\n      { value: 'biology', label: '生物' },\r\n      { value: 'history', label: '历史' },\r\n      { value: 'geography', label: '地理' },\r\n      { value: 'politics', label: '政治' }\r\n    ]\r\n    \r\n    const typeOptions = [\r\n      { value: 'document', label: '文档' },\r\n      { value: 'video', label: '视频' },\r\n      { value: 'audio', label: '音频' },\r\n      { value: 'image', label: '图片' },\r\n      { value: 'exercise', label: '习题' },\r\n      { value: 'link', label: '外部链接' }\r\n    ]\r\n    \r\n    const levelOptions = [\r\n      { value: 'primary', label: '小学' },\r\n      { value: 'junior', label: '初中' },\r\n      { value: 'senior', label: '高中' },\r\n      { value: 'college', label: '大学' }\r\n    ]\r\n    \r\n    const resourceForm = reactive({\r\n      title: '',\r\n      description: '',\r\n      subject: '',\r\n      type: '',\r\n      level: '',\r\n      keywords: '',\r\n      file: null,\r\n      url: '',\r\n      thumbnail: ''\r\n    })\r\n    \r\n    const editForm = reactive({\r\n      id: '',\r\n      title: '',\r\n      description: '',\r\n      subject: '',\r\n      level: '',\r\n      keywords: ''\r\n    })\r\n    \r\n    const rules = {\r\n      title: [\r\n        { required: true, message: '请输入标题', trigger: 'blur' },\r\n        { min: 2, max: 100, message: '长度在 2 到 100 个字符', trigger: 'blur' }\r\n      ],\r\n      description: [\r\n        { required: true, message: '请输入描述', trigger: 'blur' }\r\n      ],\r\n      subject: [\r\n        { required: true, message: '请选择科目', trigger: 'change' }\r\n      ],\r\n      type: [\r\n        { required: true, message: '请选择类型', trigger: 'change' }\r\n      ],\r\n      level: [\r\n        { required: true, message: '请选择级别', trigger: 'change' }\r\n      ],\r\n      file: [\r\n        { required: true, message: '请上传文件', trigger: 'change' }\r\n      ],\r\n      url: [\r\n        { required: true, message: '请输入外部链接', trigger: 'blur' }\r\n      ]\r\n    }\r\n    \r\n    const filters = reactive({\r\n      subject: '',\r\n      type: '',\r\n      level: '',\r\n      keyword: ''\r\n    })\r\n    \r\n    const pagination = reactive({\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0\r\n    })\r\n    \r\n    const uploadHeaders = computed(() => {\r\n      return {\r\n        Authorization: `Bearer ${localStorage.getItem('teacherToken')}`\r\n      }\r\n    })\r\n    \r\n    const filteredResources = computed(() => {\r\n      let result = resources.value\r\n      \r\n      if (filters.subject) {\r\n        result = result.filter(item => item.subject === filters.subject)\r\n      }\r\n      \r\n      if (filters.type) {\r\n        result = result.filter(item => item.type === filters.type)\r\n      }\r\n      \r\n      if (filters.level) {\r\n        result = result.filter(item => item.level === filters.level)\r\n      }\r\n      \r\n      if (filters.keyword) {\r\n        const keyword = filters.keyword.toLowerCase()\r\n        result = result.filter(item => \r\n          item.title.toLowerCase().includes(keyword) ||\r\n          item.description.toLowerCase().includes(keyword) ||\r\n          (item.keywords && item.keywords.some(k => k.toLowerCase().includes(keyword)))\r\n        )\r\n      }\r\n      \r\n      // 计算总数\r\n      pagination.total = result.length\r\n      \r\n      // 分页\r\n      const start = (pagination.currentPage - 1) * pagination.pageSize\r\n      const end = start + pagination.pageSize\r\n      \r\n      return result.slice(start, end)\r\n    })\r\n    \r\n    onMounted(() => {\r\n      fetchResources()\r\n    })\r\n    \r\n    const fetchResources = async () => {\r\n      loading.value = true\r\n      try {\r\n        // 模拟获取数据\r\n        setTimeout(() => {\r\n          resources.value = [\r\n            {\r\n              id: 1,\r\n              title: '高中数学必修一知识点',\r\n              description: '高中数学必修一重要知识点总结',\r\n              subject: 'math',\r\n              type: 'document',\r\n              level: 'senior',\r\n              uploadDate: '2023-03-16 10:30',\r\n              viewCount: 156,\r\n              downloadCount: 45,\r\n              keywords: ['高中数学', '知识点', '必修一']\r\n            },\r\n            {\r\n              id: 2,\r\n              title: '初中英语语法练习',\r\n              description: '初中英语语法练习题及答案',\r\n              subject: 'english',\r\n              type: 'exercise',\r\n              level: 'junior',\r\n              uploadDate: '2023-03-15 14:20',\r\n              viewCount: 230,\r\n              downloadCount: 120,\r\n              keywords: ['初中英语', '语法', '练习题']\r\n            },\r\n            {\r\n              id: 3,\r\n              title: '物理实验视频教程',\r\n              description: '高中物理实验演示视频',\r\n              subject: 'physics',\r\n              type: 'video',\r\n              level: 'senior',\r\n              uploadDate: '2023-03-14 16:45',\r\n              viewCount: 189,\r\n              downloadCount: 73,\r\n              keywords: ['物理实验', '视频教程', '高中物理']\r\n            }\r\n          ]\r\n          pagination.total = resources.value.length\r\n          loading.value = false\r\n        }, 500)\r\n      } catch (error) {\r\n        console.error('获取资源列表失败:', error)\r\n        loading.value = false\r\n      }\r\n    }\r\n    \r\n    const handleSizeChange = (size) => {\r\n      pagination.pageSize = size\r\n      pagination.currentPage = 1\r\n    }\r\n    \r\n    const handleCurrentChange = (page) => {\r\n      pagination.currentPage = page\r\n    }\r\n    \r\n    const handleUploadSuccess = (res, file) => {\r\n      ElMessage.success('文件上传成功')\r\n      resourceForm.file = res.filePath\r\n    }\r\n    \r\n    const handleUploadError = () => {\r\n      ElMessage.error('文件上传失败')\r\n    }\r\n    \r\n    const beforeUpload = (file) => {\r\n      const maxSize = 50 * 1024 * 1024 // 50MB\r\n      if (file.size > maxSize) {\r\n        ElMessage.error('文件大小不能超过50MB')\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    \r\n    const handleThumbnailSuccess = (res, file) => {\r\n      resourceForm.thumbnail = res.thumbnailPath\r\n      ElMessage.success('缩略图上传成功')\r\n    }\r\n    \r\n    const beforeThumbnailUpload = (file) => {\r\n      const isJPG = file.type === 'image/jpeg'\r\n      const isPNG = file.type === 'image/png'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n      \r\n      if (!isJPG && !isPNG) {\r\n        ElMessage.error('缩略图只能是 JPG 或 PNG 格式!')\r\n        return false\r\n      }\r\n      if (!isLt2M) {\r\n        ElMessage.error('缩略图大小不能超过 2MB!')\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    \r\n    const submitForm = () => {\r\n      if (resourceFormRef.value) {\r\n        resourceFormRef.value.validate(async (valid) => {\r\n          if (valid) {\r\n            try {\r\n              // 模拟提交表单\r\n              ElMessage.success('资源上传成功')\r\n              dialogVisible.value = false\r\n              // 刷新资源列表\r\n              fetchResources()\r\n              // 重置表单\r\n              resourceForm.title = ''\r\n              resourceForm.description = ''\r\n              resourceForm.subject = ''\r\n              resourceForm.type = ''\r\n              resourceForm.level = ''\r\n              resourceForm.keywords = ''\r\n              resourceForm.file = null\r\n              resourceForm.url = ''\r\n              resourceForm.thumbnail = ''\r\n            } catch (error) {\r\n              console.error('上传资源失败:', error)\r\n              ElMessage.error('上传资源失败')\r\n            }\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      }\r\n    }\r\n    \r\n    const handleEdit = (row) => {\r\n      editForm.id = row.id\r\n      editForm.title = row.title\r\n      editForm.description = row.description\r\n      editForm.subject = row.subject\r\n      editForm.level = row.level\r\n      editForm.keywords = row.keywords ? row.keywords.join(',') : ''\r\n      \r\n      editDialogVisible.value = true\r\n    }\r\n    \r\n    const submitEditForm = () => {\r\n      if (editFormRef.value) {\r\n        editFormRef.value.validate(async (valid) => {\r\n          if (valid) {\r\n            try {\r\n              // 模拟更新资源\r\n              ElMessage.success('资源更新成功')\r\n              editDialogVisible.value = false\r\n              // 刷新资源列表\r\n              fetchResources()\r\n            } catch (error) {\r\n              console.error('更新资源失败:', error)\r\n              ElMessage.error('更新资源失败')\r\n            }\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n      }\r\n    }\r\n    \r\n    const handleDelete = (row) => {\r\n      ElMessageBox.confirm(\r\n        '确定要删除该资源吗？',\r\n        '警告',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }\r\n      ).then(async () => {\r\n        try {\r\n          // 模拟删除资源\r\n          ElMessage.success('资源删除成功')\r\n          // 刷新资源列表\r\n          fetchResources()\r\n        } catch (error) {\r\n          console.error('删除资源失败:', error)\r\n          ElMessage.error('删除资源失败')\r\n        }\r\n      }).catch(() => {\r\n        // 取消删除\r\n      })\r\n    }\r\n    \r\n    return {\r\n      resources,\r\n      loading,\r\n      dialogVisible,\r\n      editDialogVisible,\r\n      resourceFormRef,\r\n      editFormRef,\r\n      resourceForm,\r\n      editForm,\r\n      rules,\r\n      subjectOptions,\r\n      typeOptions,\r\n      levelOptions,\r\n      filters,\r\n      pagination,\r\n      uploadHeaders,\r\n      filteredResources,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      handleUploadSuccess,\r\n      handleUploadError,\r\n      beforeUpload,\r\n      handleThumbnailSuccess,\r\n      beforeThumbnailUpload,\r\n      submitForm,\r\n      handleEdit,\r\n      submitEditForm,\r\n      handleDelete\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.resource-management {\r\n  padding: 20px;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filters {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.search-input {\r\n  width: 200px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409EFF;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n}\r\n</style> "]}]}